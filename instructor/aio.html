<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to developing software in a team for Astronomers: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/swc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/swc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/swc/favicon-16x16.png">
<link rel="manifest" href="../favicons/swc/site.webmanifest">
<link rel="mask-icon" href="../favicons/swc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Collaborative software development" src="../assets/images/software-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Collaborative software development" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to developing software in a team for Astronomers
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to developing software in a team for Astronomers
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to developing software in a team for Astronomers
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="PoC.html">2. Coding Up A Proof Of Concept</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="DevInATeam.html">3. Developing Software In A Team</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="ReusableCode.html">4. Making Code Reusable by You and Your Group</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->





                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2026-02-25 |

        <a href="https://github.com/PaulHancock/Lesson-Testing/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<section><h2 class="section-heading" id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<hr class="half-width">
<p>Writing software is an integral component of the research activities
of many astronomers. Increasingly, such software is written in
collaborative efforts involving multiple researchers across multiple
institutions. Despite this, training for astronomy students and early
career researchers in best practices for collaborative software
development is often informal and fails to make use of software industry
knowledge. The goal of this course is to fill this training gap.</p>
<p>In this course you will be guided through the development of a
software package, beginning at proof of concept, and finishing with a
project that is findable, accessible, interoperable, reusable (FAIR),
and citable by others. This course is presented in lessons which
represent development <strong>cycles</strong>. Each cycle will be
another step along the path of making code that you are proud of and can
be recognised for.</p>
<p>You can engage with this course as a reading assignment but we
recommend that you follow along at home by applying all the lessons
learned to your own software project. This course is designed with
<strong>collaborative</strong> software development in mind. Throughout
the course there will be self paced ungraded activities to complete that
will be marked as either SOLO or GROUP activities. If you are joining
this course as part of a group wishing to improve your collaborative
software development skills then you should aim to complete all the
activities. If you are joining this course on your own then some of the
group activities will not be relevant to you and you can skip them as
appropriate.</p>
<p>At the beginning of this course you will be taken through a typical
research driven development phase. In this phase we will create a proof
of concept code which we then build on throughout the course. This
project is extremely simple in scope as it intended to be a minimum
working example that we can use to demonstrate various development
techniques. Many of the examples in this course will refer to the
example code. If you have an existing software project we recommend that
you use that project when doing the various activities as you will
encounter more issues, learn more techniques, and the solutions to the
activities will be directly usable and beneficial to you.</p>
</section><section><h2 class="section-heading" id="assumed-knowledge-and-software-requirements">Assumed knowledge and software requirements<a class="anchor" aria-label="anchor" href="#assumed-knowledge-and-software-requirements"></a>
</h2>
<hr class="half-width">
<p>This course assumes that you have basic proficiency in python. While
python is the language that we’ll be working with primarily, most of the
lessons are applicable to any language.</p>
<p>A large part of working in a group will involve keeping track of
changes to a shared code base. For this we will be using the git version
control system, and in particular we will be using GitHub as the remote
repository.</p>
<p>Software requirements:</p>
<ul>
<li>Python 3.8 +</li>
<li>A integrated development environment (IDE) or text editor of choice
<ul>
<li>We recommend <a href="https://www.jetbrains.com/pycharm/" class="external-link">PyCharm</a> or <a href="https://code.visualstudio.com/" class="external-link">Visual Studio Code</a>
</li>
</ul>
</li>
<li>An operating system which gives you a proper command line</li>
<li>For windows this means using something like <a href="https://gitforwindows.org/" class="external-link">gitbash</a>, <a href="https://docs.microsoft.com/en-us/windows/wsl/install" class="external-link">WSL</a>, or
the <a href="https://www.anaconda.com/" class="external-link">Anaconda</a> prompt</li>
<li>For OSX or Linux the regular terminal will be fine</li>
<li>git, either from the command line, using a git desktop app, or as an
add on to PyCharm or VSCode.</li>
<li>An account on GitHub is required for some of the activities.</li>
</ul>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></section></section><section id="aio-PoC"><p>Content from <a href="PoC.html">Coding Up A Proof Of Concept</a></p>
<hr>
<p>Last updated on 2026-02-24 |

        <a href="https://github.com/PaulHancock/Lesson-Testing/edit/main/episodes/PoC.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 110 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Where/How do I start a new project?</li>
<li>How do I use a function?</li>
<li>How do I document and test my code?</li>
<li>Can I make a command line interface for my code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Build a minimal working or “proof of concept” project that we can
build on in this workshop</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="beginning-a-new-software-project">Beginning a new software project<a class="anchor" aria-label="anchor" href="#beginning-a-new-software-project"></a>
</h2>
<hr class="half-width">
<p>Before we do anything to our project we should talk about:</p>
<div class="section level3">
<h3 id="organisation">Organisation<a class="anchor" aria-label="anchor" href="#organisation"></a>
</h3>
<p>Organisation is key to a good project. Every time you start a new
project or explore a new idea it is a good idea to create a new space
for that project. This means creating a new directory for you to collect
all the relevant data, software, and documentation. You will be involved
in many projects through your career and often will have to manage
multiple projects simultaneously. It is therefore not just a good idea
to organise each project, but to have a consistent organisation
structure between projects. In this section we will make some
recommendations for organising a software project.</p>
<div class="section level4">
<h4 id="put-each-project-in-its-own-directory-which-is-named-after-the-project-">Put each project in its own directory, which is named after the
project.<a class="anchor" aria-label="anchor" href="#put-each-project-in-its-own-directory-which-is-named-after-the-project-"></a>
</h4>
<p>The location of this directory will depend on a higher level
organisation scheme. For example you may separate your projects based on
funding, based on collaboration, or based on research area.</p>
<p>Within you software project directory we recommend the following
structure:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> .
 ├── README.md          &lt;- Description of this project
 ├── bin                &lt;- Your compiled code can be stored here (not tracked by git)
 ├── config             &lt;- Configuration files, e.g., for doxygen or for your model if needed
 ├── data
 │   ├── external       &lt;- Data from third party sources.
 │   ├── interim        &lt;- Intermediate data that has been transformed.
 │   ├── processed      &lt;- The final data sets for analysis.
 │   └── raw            &lt;- The original, immutable data dump.
 ├── docs               &lt;- Documentation, e.g., doxygen or reference papers (not tracked by git)
 ├── notebooks          &lt;- Jupyter or R notebooks
 ├── reports            &lt;- For a manuscript source, e.g., LaTeX, Markdown, etc., or any project reports
 │   └── figures        &lt;- Figures for the manuscript or reports
 └── src                &lt;- Source code for this project
     ├── external       &lt;- Any external source code, e.g., pull other git projects libraries
     └── tools          &lt;- Any helper scripts go here</code></pre>
</div>
<p>Setting up an empty structure such as the above can be done either by
making an template and then copying that every time you start a new
project. Additionally there are python packages such as
<code>cookiecutter</code> (<a href="https://pypi.org/project/cookiecutter/" class="external-link">pypi</a>, <a href="https://cookiecutter.readthedocs.io/en/1.7.2/" class="external-link">rtfd</a>, <a href="https://github.com/audreyfeldroy/cookiecutter-pypackage" class="external-link">github</a>)
that can automate this process for you, and offer a range of templates
to work with.</p>
</div>
<div class="section level4">
<h4 id="name-all-files-to-reflect-their-content-or-function-">Name all files to reflect their content or function.<a class="anchor" aria-label="anchor" href="#name-all-files-to-reflect-their-content-or-function-"></a>
</h4>
<p>It is also convenient to use a consistent and descriptive naming
format for all your files and sub-folders. For example, use names such
as <code>galaxy_count_table.csv</code>, <code>manuscript.md</code>, or
<code>light_curve_analysis.py</code>. Do not using sequential numbers
(e.g., <code>result1.csv</code>, <code>result2.csv</code>) or a location
in a final manuscript (e.g., <code>fig_3_a.png</code>), since those
numbers will almost certainly change as the project evolves (and are
meaningless on their own).</p>
</div>
</div>
<div class="section level3">
<h3 id="starting-our-project">Starting our project<a class="anchor" aria-label="anchor" href="#starting-our-project"></a>
</h3>
<p>Now we are ready to actually start doing something with our
project.</p>
<div class="section level4">
<h4 id="project-evolution">Project evolution<a class="anchor" aria-label="anchor" href="#project-evolution"></a>
</h4>
<p>In the typical project cycle for an astronomer or research software
engineer (or RSE, a formal name for people who combine professional
software expertise with an understanding of research), you will not sit
down and have a detailed discussion about what the project is, where it
needs to go, what the user stories and milestones are, and who will be
involved. Usually research evolves organically through informal
discussions with colleagues, or a sudden thought in the shower.
Similarly our software projects evolve in an organic manner, often
beginning with a small script of function to do just this one thing,
which then over time gets used, reused, augmented, shared, and thus
evolves into a software project. This evolution of ideas and code does
not fit will with much of the more formal structures that professional
software developers adhere to, and so we will not try to fit our
projects to such a scheme. Instead we will create a path for our
software that will be suited to our work style, but which draws on the
knowledge and experience of professional software developers. Thus we
will begin with a proof of concept code – a short bit of work that
proves that something works using the minimal amount of effort.</p>
</div>
<div class="section level4">
<h4 id="example-project">Example project<a class="anchor" aria-label="anchor" href="#example-project"></a>
</h4>
<p>The example project that we will work with will involve tasks that
are familiar to many astronomers. The work that is being done is mostly
for demonstration purposes – existing libraries will be able to do this
task faster and easier that we will. The point of this example project
is not the content, but the methodology that we use as we pass through
various cycles of development.</p>
</div>
</div>
</section><section><h2 class="section-heading" id="example-project-an-astronomy-catalogue-simulator">Example project: an astronomy catalogue simulator<a class="anchor" aria-label="anchor" href="#example-project-an-astronomy-catalogue-simulator"></a>
</h2>
<hr class="half-width">
<p>The example project that we will be developing will simulate a
catalogue of foreground stars in the direction of the Andromeda galaxy.
The initial requirements are as follows:</p>
<p>Stars should have randomised sky positions around the Andromeda
galaxy Positions should fall within 1 degree of the central location
Each star should have a unique ID The star ID and position should be
saved in a csv file to be analysed by other programs This program is
intended to be used by the developer and their research group which
includes people who are not proficient python programmers.</p>
<p>It is intended that the software will grow in capability and
complexity only as needed to support a current research project.</p>
<p>With this in mind we move to the first stage of our software project
– the proof of concept.</p>
<div id="solo-activity-project-structure" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="solo-activity-project-structure" class="callout-inner">
<h3 class="callout-title">SOLO Activity: Project structure</h3>
<div class="callout-content">
<p>Consider the astronomy catalogue simulator project mentioned in the
previous lesson.</p>
<p>Come up with a planned project structure that would be appropriate
for this project. How much of the structure would change if you were to
use a different language (e.g. Python vs C)? The scope of work is quite
modest and could be achieved with a flat file structure or a single
file. Which statements in the previous lesson suggest that a good
project structure will be beneficial to future work?</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="proof-of-concept-code">Proof of concept code<a class="anchor" aria-label="anchor" href="#proof-of-concept-code"></a>
</h2>
<hr class="half-width">
<p>The first iteration of our code is shown below. It was written in a
stream-of-conscious mode with a focus on getting a minimum working
example that proves that the work can be done.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#! /usr/bin/env python</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># Demonstrate that we can simulate a catalogue of stars on the sky</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># Determine Andromeda location in ra/dec degrees</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># from wikipedia</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>ra <span class="op">=</span> <span class="st">'00:42:44.3'</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>dec <span class="op">=</span> <span class="st">'41:16:09'</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>d, m, s <span class="op">=</span> dec.split(<span class="st">':'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>dec <span class="op">=</span> <span class="bu">int</span>(d)<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>h, m, s <span class="op">=</span> ra.split(<span class="st">':'</span>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>ra <span class="op">=</span> <span class="dv">15</span><span class="op">*</span>(<span class="bu">int</span>(h)<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>ra <span class="op">=</span> ra<span class="op">/</span>math.cos(dec<span class="op">*</span>math.pi<span class="op">/</span><span class="dv">180</span>)</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co"># make 1000 stars within 1 degree of Andromeda</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>ra_offsets <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, size<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>dec_offsets <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, size<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>ras <span class="op">=</span> ra <span class="op">+</span> ra_offsets</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>decs <span class="op">=</span> dec <span class="op">+</span> dec_offsets</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co"># now write these to a csv file for use by my other program</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'catalog.csv'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"id,ra,dec"</span>, <span class="bu">file</span><span class="op">=</span>f)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st">, </span><span class="sc">{1:7.4f}</span><span class="st">, </span><span class="sc">{2:7.4f}</span><span class="st">"</span>.<span class="bu">format</span>(i, ras[i], decs[i]), <span class="bu">file</span><span class="op">=</span>f)</span></code></pre>
</div>
<p>The above code was saved as <code>sim.py</code>. When run from the
command line it produces a file (<code>catalog.csv</code>) with a
header, one thousand rows, and columns showing the id/ra/dec of the
simulated points on the sky. Right now the code runs without error and
at first glance does what we need.</p>
<p>If we plot the ra/dec locations of the catalog we get the following
output:</p>
<figure><img src="../fig/poc/catalog_plot.png" alt="catalogue plot" class="figure mx-auto d-block"><div class="figcaption">catalogue plot</div>
</figure><p>Sky plot of the catalog that comes from the sim.py program.</p>
</section><section><h2 class="section-heading" id="making-code-reusable-via-functions">Making code reusable via functions<a class="anchor" aria-label="anchor" href="#making-code-reusable-via-functions"></a>
</h2>
<hr class="half-width">
<p>Now that we have proved to ourselves that it’s possible to generate a
catalog, we want to tidy up the code a little so that it can be reused
and adapted easily.</p>
<p>At the moment our intended audience is ourselves, so we are content
with keeping all the relevant information within the code itself. As a
first step we create new variables that record the target location
(<code>ref_ra/ref_dec</code>), the number of stars to generate
(<code>nsources</code>), and how far from the central location the new
positions should be generated (<code>radius</code>). This is done using
global variables at the top of our file like this:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">#! /usr/bin/env python</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Demonstrate that we can simulate a catalogue of stars on the sky</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Determine Andromeda location in ra/dec degrees</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co"># configuration using global variables</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>nsources <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co"># from wikipedia</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>ref_ra <span class="op">=</span> <span class="st">'00:42:44.3'</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>ref_dec <span class="op">=</span> <span class="st">'41:16:09'</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>radius <span class="op">=</span> <span class="dv">1</span></span></code></pre>
</div>
<p>From here we need to make a few changes to our code so that these
variables are now used in place of the previously hard-coded values.</p>
<p>We then take all the code that is part of the position generation
stage and bundle it all together into a function which we call
<code>generate_positions</code>. This allows us to keep that part of the
code separate from the file writing stage. In fact while we are at it we
should make a function for doing the file writing. Lets call it
<code>write_file</code>. While we are writing these functions we can use
python <a href="https://www.python.org/dev/peps/pep-0257/" class="external-link">docstrings</a> to
document the intent of each function.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">def</span> generate_positions():</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">    Create `nsources` random locations within `radius` degrees of the reference `ref_ra`/`ref_dec`.</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">    ra, dec : numpy.array</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">        Arrays of ra and dec coordinates in degrees.</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>    <span class="co"># convert DMS -&gt; degrees</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>    d, m, s <span class="op">=</span> ref_dec.split(<span class="st">':'</span>)</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>    dec <span class="op">=</span> <span class="bu">int</span>(d)<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>    <span class="co"># convert HMS -&gt; degrees</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>    h, m, s <span class="op">=</span> ref_ra.split(<span class="st">':'</span>)</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>    ra <span class="op">=</span> <span class="dv">15</span><span class="op">*</span>(<span class="bu">int</span>(h)<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span>)</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>    ra <span class="op">=</span> ra<span class="op">/</span>math.cos(dec<span class="op">*</span>math.pi<span class="op">/</span><span class="dv">180</span>)  <span class="co"># don't forget projection effects</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>    ra_offsets <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="dv">1</span><span class="op">*</span>radius, radius, size<span class="op">=</span>nsources)</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>    dec_offsets <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="dv">1</span><span class="op">*</span>radius, radius, size<span class="op">=</span>nsources)</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>    ras <span class="op">=</span> ra <span class="op">+</span> ra_offsets</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>    decs <span class="op">=</span> dec <span class="op">+</span> dec_offsets</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>    <span class="cf">return</span> ras, decs</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="kw">def</span> write_file(ras, decs):</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="co">    Write the ra/dec catalog to a file, and include a header and IDs.</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'catalog.csv'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a>        <span class="co"># creat a header row</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"id,ra,dec"</span>, <span class="bu">file</span><span class="op">=</span>f)</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(nsources):</span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a>            <span class="co"># use a csv format</span></span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st">, </span><span class="sc">{1:7.4f}</span><span class="st">, </span><span class="sc">{2:7.4f}</span><span class="st">"</span>.<span class="bu">format</span>(i, ras[i], decs[i]), <span class="bu">file</span><span class="op">=</span>f)</span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre>
</div>
<p>Note that the first function takes no parameters, while the second is
designed to take two lists of positions as input. By breaking our code
into functional blocks we have a number of advantages:</p>
<p>We can reuse a block of code by calling the function multiple times,
and don’t have to bother with duplicated code. Duplicated code means
duplicated bugs! The code within each function will not interfere with
code in other functions, allowing us to reuse names of variables, and
for unused variables and memory to be deleted upon exiting the function.
We can document each function separately using a docstring to describe
the intent of the code. This is in addition to the inline comments that
we have used.</p>
<p>Our script can now be finished with a few more lines of code.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Do the work</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>ras, decs <span class="op">=</span> generate_positions()</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>write_file(ras, decs)</span></code></pre>
</div>
<p>As a developer the code is now separated into functional parts, so if
something goes wrong or needs changing, we know where to look to make
those changes. As a user of the code we can open the file and read the
first few lines to see what the default parameters are, and modify them
if we choose. Additionally, as a user we can read the names and
docstrings of the functions to understand what the code is doing rather
than having to read the code itself.</p>
<p>Now we have a piece of code that is easier to use. However, this code
is only really usable as is, and requires people to read/edit the source
code to understand how it works and adapt it for their use. In the next
section we’ll see how to further generalise our code by using more
function parameters, and adding a command line interface.</p>
</section><section><h2 class="section-heading" id="creating-a-command-line-interface">Creating a command line interface<a class="anchor" aria-label="anchor" href="#creating-a-command-line-interface"></a>
</h2>
<hr class="half-width">
<p>In the previous lesson we saw how we could use functions to separate
different tasks, and docstrings to describe the behaviour of these
functions. In this lesson we’ll generalise our code even further by
removing the global variables, adding functions parameters, and adding a
command line interface.</p>
<p>The first thing that we will do is remove the global variables, and
have these values passed to the functions directly. This will mean that
someone reading the code for a function doesn’t have to hunt through the
rest of the code to figure out what the global variables are.</p>
<p>For the <code>generate_positions</code> function we can use
parameters with the same name as the previously existing global
variables, and we can set their default values to match. We have also
taken the opportunity to update the docstring so that we know what types
of parameters should be passed and what they are for.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">def</span> generate_positions(ref_ra<span class="op">=</span><span class="st">'00:42:44.3'</span>,</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                       ref_dec<span class="op">=</span><span class="st">'41:16:09'</span>,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                       radius<span class="op">=</span><span class="fl">1.</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                       nsources<span class="op">=</span><span class="dv">1000</span>):</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">    Create nsources random locations within radius of the reference position.</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">    ref_ra, ref_dec : str</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">        Reference position in "HH:MM:SS.S"/"DD:MM:SS.S" format.</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">        Default position is Andromeda galaxy.</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">    radius : float</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">        The radius within which to generate positions. Default = 1.</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">    nsources : int</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">        The number of positions to generate</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">    ra, dec : numpy.array</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="co">        Arrays of ra and dec coordinates in degrees.</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>    ...</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre>
</div>
<p>For the <code>write_file</code> function, we already had two
parameters that needed to be passed, but now we’ll add another which is
the output file name. This wasn’t part of the global variables, but it
was a hard coded file that we might want to change as we create multiple
catalogs. Note that this function used to use the <code>nsources</code>
global variable to know how many ra/dec values were passed. In this
revised version we just look at the length of the <code>ras</code> list
instead.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">def</span> write_file(ras, decs,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>               outfile<span class="op">=</span><span class="st">'catalog.csv'</span>):</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">    Write the ra/dec catalog to a file, and include a header and IDs.</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">    ras, decs : list, numpy.array, or any iterable</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">        Iterable of ra and dec coordinates. The length of these need to match.</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">    outfile : str</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">        Path/filename for the output file. (Overwite=True)</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(outfile, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>        <span class="co"># creat a header row</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"id,ra,dec"</span>, <span class="bu">file</span><span class="op">=</span>f)</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ras)):</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>            <span class="co"># use a csv format</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st">, </span><span class="sc">{1:7.4f}</span><span class="st">, </span><span class="sc">{2:7.4f}</span><span class="st">"</span>.<span class="bu">format</span>(i, ras[i], decs[i]), <span class="bu">file</span><span class="op">=</span>f)</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre>
</div>
<p>By moving the global variables into the parameters of the functions,
and making use of the default values we don’t need to make any further
changes to our code. The following block is unchanged.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Do the work</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>ras, decs <span class="op">=</span> generate_positions()</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>write_file(ras, decs)</span></code></pre>
</div>
<p>One advantage to our changes is that we could now generate a
different catalog by adjusting these last two lines like this:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>ras, decs <span class="op">=</span> generate_positions(radius<span class="op">=</span><span class="fl">2.</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>write_file(ras,decs, outfile<span class="op">=</span><span class="st">'catalog_2deg.csv'</span>)</span></code></pre>
</div>
<p>We will leverage this ability in order to make a command line
interface. The recommended way to do this is to use the
<code>argparse</code> module, and an <code>if __name__</code> clause as
follows.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>    <span class="co"># Set up the parser with all the options that you want</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    parser <span class="op">=</span> argparse.ArgumentParser(prog<span class="op">=</span><span class="st">'sim'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    group1 <span class="op">=</span> parser.add_argument_group()</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    group1.add_argument(<span class="st">'--ref_ra'</span>, dest<span class="op">=</span><span class="st">'ref_ra'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'00:42:44.3'</span>,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Central/reference RA position HH:MM:SS.S format'</span>)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    group1.add_argument(<span class="st">'--ref_dec'</span>, dest<span class="op">=</span><span class="st">'ref_dec'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'41:16:09'</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Central/reference Dec position DD:MM:SS.S format'</span>)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    group1.add_argument(<span class="st">'--radius'</span>, dest<span class="op">=</span><span class="st">'radius'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>, default<span class="op">=</span><span class="fl">1.</span>,</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'radius within which the new positions are generated (deg)'</span>)</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    group1.add_argument(<span class="st">'--n'</span>, dest<span class="op">=</span><span class="st">'nsources'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, default<span class="op">=</span><span class="dv">1_000</span>,</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Number of positions to generate'</span>)</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    group1.add_argument(<span class="st">'--out'</span>, dest<span class="op">=</span><span class="st">'outfile'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'catalog.csv'</span>,</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Filename for saving output (csv format)'</span>)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>    <span class="co"># parse the command line input</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    options <span class="op">=</span> parser.parse_args()</span></code></pre>
</div>
<p>Here we have created a single group of arguments called
<code>group1</code>, and then we add five different arguments to that
group. Note that we provide both a call signature (<code>--out</code>)
for specifying a parameter, as well as the name/type/default value of
that parameter (<code>dest/type/default</code>). The <code>help</code>
is optional but highly recommended. If we were to run the code above
with the <code>--help</code> option then we would get the following
output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$&gt; python sim.py --help
usage: sim [-h] [--ref_ra REF_RA] [--ref_dec REF_DEC] [--radius RADIUS] [--n NSOURCES] [--out OUTFILE]

optional arguments:
  -h, --help         show this help message and exit

  --ref_ra REF_RA    Central/reference RA position HH:MM:SS.S format
  --ref_dec REF_DEC  Central/reference Dec position DD:MM:SS.S format
  --radius RADIUS    radius within which the new positions are generated (deg)
  --n NSOURCES       Number of positions to generate
  --out OUTFILE      Filename for saving output (csv format)</code></pre>
</div>
<p>Right away we have a way for people to understand how to use the
program without having to open the source code. This will include you,
two days from now, when you forgot some of the details of the code.</p>
<p>Finally, we can connect the user input to the program by using the
<code>options</code> object. Each of the parameters that were read in
with a <code>dest=thing</code> can be accessed using
<code>options.thing</code>. If we specified a type then argparse will
make sure that users don’t give input that can’t be converted to that
type. The final part of our code now looks like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>    <span class="co"># parse the command line input</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    options <span class="op">=</span> parser.parse_args()</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    ras, decs <span class="op">=</span> generate_positions(ref_ra<span class="op">=</span>options.ref_ra,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>                                   ref_dec<span class="op">=</span>options.ref_dec,</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>                                   radius<span class="op">=</span>options.radius,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>                                   nsources<span class="op">=</span>options.nsources)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    write_file(ras, decs, outfile<span class="op">=</span>options.outfile)</span></code></pre>
</div>
<p>Since we specified default values for all of the inputs, we can run
<code>python sim.py</code> and it will run with the default values.</p>
</section><section><h2 class="section-heading" id="creating-a-simple-testing-script">Creating a simple testing script<a class="anchor" aria-label="anchor" href="#creating-a-simple-testing-script"></a>
</h2>
<hr class="half-width">
<p>We now have a script with a command line interface that allows people
to use the code without having to read the source. At this point we are
feeling rather professional and are happy to share the code with others.
One of the things that is often scary is the thought of others finding
bugs in our code and then having to fix these bugs. A good way to
alleviate these fears is to do some testing of the code ourselves to
catch all the obvious errors before the script is sent to others. In a
later lesson we’ll go through some more formal and rigorous testing, but
for now we are going to start simple with some of the most basic
tests.</p>
<p>In our file <code>test_sim.sh</code> we will make three tests. The
first two tests we are going to do will just ensure that the code will
not immediately crash when we run it:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">#! /usr/bin/env bash</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Testing sim.py"</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="ex">python</span> sim.py <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">"FAILED to run with default parameters"</span><span class="kw">;</span> <span class="bu">exit</span> 1 <span class="kw">;}</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="ex">python</span> sim.py <span class="at">--help</span> <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">"FAILED to print help"</span><span class="kw">;</span> <span class="bu">exit</span> 1 <span class="kw">;}</span></span></code></pre>
</div>
<p>The next test we do will ensure that when we pass a filename to the
<code>--out</code> option, we will get a new file with that name. We use
the bash <code>[ ] test</code> and <code>-f conditional</code> to see
that the file exists.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">python</span> sim.py <span class="at">--out</span> test.csv</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-f</span> <span class="st">"test.csv"</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"FAILED to generate ouput test.csv"</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="bu">exit</span> 1</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"all tests PASSED"</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="bu">exit</span> 0</span></code></pre>
</div>
<p>The last two lines above then make sure that when the tests all pass
we get a positive message and return an <a href="https://www.gnu.org/software/bash/manual/html_node/Exit-Status.html" class="external-link">exit
status</a> of 0.</p>
<p>We now have a test script that will catch the most egregious issues
with our script. Any time we make changes to our script we should run
the test script just to make sure that we haven’t seriously broken
anything.</p>
<p>More advanced testing with bash is not explored here as we will move
to a python based test environment in a later lesson. The python based
testing will make it easier to do things like make sure the right number
of entries exist in the catalogue file and that the positions all lie
within the specified region.</p>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>In this first development cycle we have:</p>
<ul>
<li>Demonstrated that we can simulate a catalogue of positions on the
sky;</li>
<li>Written a function to do the simulation, and another to write the
results to a file;</li>
<li>Created a command line interface to make the script easy to use and
re-use; and</li>
<li>Made a simple test script to alert us when our changes break the
code.</li>
</ul>
<p>If you would like to see the status of the project at the end of this
cycle you can look at the cycle1 branch on GitHub (<a href="https://github.com/ADACS-Australia/MAP21B-Training-BPindor/tree/cycle1" class="external-link">at
this link</a>). <!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></p>
</section></section><section id="aio-DevInATeam"><p>Content from <a href="DevInATeam.html">Developing Software In A Team</a></p>
<hr>
<p>Last updated on 2026-02-25 |

        <a href="https://github.com/PaulHancock/Lesson-Testing/edit/main/episodes/DevInATeam.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 180 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are some pro/con of developing in a team?</li>
<li>What are some common team roles?</li>
<li>How can GitHub help managing tasks in a group project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Gain experience developing software in a team environment</li>
<li>Understand some common project management styles</li>
<li>Create a new GitHub repo and push our project</li>
<li>Experience a full development cycle with our test project</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="benefits-and-pit-falls">Benefits and pit-falls<a class="anchor" aria-label="anchor" href="#benefits-and-pit-falls"></a>
</h2>
<hr class="half-width">
<p>Working on a software project as part of a team is a very different
experience from working on a solo project. There are of course great
advantages to having multiple people working on a problem, but there are
also some pit-falls that need to be avoided, and overheads that cannot
be avoided.</p>
<div class="section level3">
<h3 id="benefits-of-working-in-a-team">Benefits of working in a team<a class="anchor" aria-label="anchor" href="#benefits-of-working-in-a-team"></a>
</h3>
<ul>
<li>Each person has different areas of expertise</li>
<li>More person-hours available</li>
<li>Group discussion leads to better decision making</li>
<li>Group members can learn from each other faster than they can learn
from a book/website</li>
<li>Seeing how others work and solve problems can help you learn new
skills that you didn’t know you needed</li>
<li>Bug-fixing is easier when you have an informed buddy to talk to</li>
<li>Work can be assigned to people with the most relevant skills
increasing efficiency</li>
<li>Dividing the development and testing of a work item between two
people can make for better code and more complete tests</li>
</ul>
</div>
<div class="section level3">
<h3 id="pit-falls-to-avoid">Pit-falls to avoid<a class="anchor" aria-label="anchor" href="#pit-falls-to-avoid"></a>
</h3>
<ul>
<li>Siloing work:
<ul>
<li>Separating work items can be a good idea but there needs to be
frequent check-ins to ensure that the software being developed by two
people is not diverging or conflicting</li>
</ul>
</li>
<li>Inconsistent standards:
<ul>
<li>Even though people may have personal preferences or styles,
documentation, commenting, and testing should be consistent across a
code base.</li>
</ul>
</li>
<li>Non-constructive criticism:
<ul>
<li>When things work they just work and no one talks about it</li>
<li>When things break everyone talks about it</li>
<li>Given that issues result from negative experiences, it is important
for team moral to always try and keep feedback as constructive as
possible</li>
</ul>
</li>
<li>Platform / dependency conflicts:
<ul>
<li>There is no guarantee that all developers will be using the same
operating system or development tools.</li>
<li>Allowing people the freedom to choose is important but the
differences need to be managed via an agreement on how/when/where
testing takes place, what acceptance looks like, and the use of a style
guide.</li>
<li>Having some files with windows style end of line and others with
linux style end of line can make it tedious to track changes</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="overheads-that-cannot-should-not-be-avoided">Overheads that cannot (should not) be avoided<a class="anchor" aria-label="anchor" href="#overheads-that-cannot-should-not-be-avoided"></a>
</h3>
<p>Project management will take time, and may not be a skill that you
have. Invest time in training. Communication and coordination take time
but are vital to success Commit conflicts will arise even if everything
is done right, these need to be discussed and handled properly rather
than ignored The moral of the team is important to success and will take
time and effort to maintain, but it is worth doing so that your project
can see the benefits listed above.</p>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>Working in a team can be a hugely beneficial experience for all
involved, however there are some negative features that need to be
avoided or managed. In the next section we’ll explore how we can create
and document project standards that will make working in a team much
easier.</p>
</div>
</section><section><h2 class="section-heading" id="communication-and-project-management">Communication and project management<a class="anchor" aria-label="anchor" href="#communication-and-project-management"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="communication">Communication<a class="anchor" aria-label="anchor" href="#communication"></a>
</h3>
<p>Team work requires effective communication between team members. This
helps to keep everyone up to date on the status of the project, the
current and future direction of the work, and avoids duplication of
effort. Email, slack, messenger, GitHub issues, chats over a coffee, or
a formal weekly meeting, are all valid ways of keeping the teem
together. A formal meeting once a month complimented by a weekly email
to status check, and real time slack messaging for immediate questions
may be a good solution for a 5 person team working on a year long
project. An informal weekly chat over lunch with intermittent emails may
be good for a 2 person team working on a project that lasts a few
months. The most important thing is that the chosen method is effective
and that it includes all team members.</p>
<p>If an informal or ephemeral communication medium is involved when
coming to an agreement or making a decision, it is good practice to have
a follow up communication to reiterate the decision and reasoning using
a medium that can be archived. For example, if the team meets over a
coffee, discusses a current issue, and decides on a way forward, it is a
good idea for someone to follow this up with an email so that the
details of the decision are not lost.</p>
</div>
<div class="section level3">
<h3 id="project-management-styles">Project management styles<a class="anchor" aria-label="anchor" href="#project-management-styles"></a>
</h3>
<p>The two main project management styles that are applied to software
development are <strong>waterfall</strong> and <strong>agile</strong>.
Neither of these are a project management methodology but are more like
umbrella terms that group a set of methodologies that share a common
mindset. In the waterfall mindset there is a very linear approach to the
design and execution and delivery of the project with the main focus
being on the process. In the agile mindset the main focus is on outcomes
and deliverables, with the design and execution and delivery occurring
in cycles.</p>
<div class="section level4">
<h4 id="waterfall">Waterfall<a class="anchor" aria-label="anchor" href="#waterfall"></a>
</h4>
<p>In a waterfall project the whole life cycle of a project is mapped
onto distinct, sequential work items, with each item relying on those
that occur before, and blocking those that come after. Waterfall project
management therefore represents a very rigid and linear approach. The
waterfall system is a very traditional method for managing a project
with participants being assigned clear roles and expectations.</p>
<p><img src="../fig/team/waterfall.png" alt="Waterfall Methodology" class="figure">
Image credit: <a href="https://startinfinity.com/project-management-methodologies/waterfall" class="external-link uri">https://startinfinity.com/project-management-methodologies/waterfall</a></p>
<p>The name waterfall comes from the fact that each work item will
cascade onto the next. In a waterfall project there is a lot of
attention paid to defining the entirety of the project up front, and
then a close adherence to the project plan and timeline. It is therefore
difficult to incorporate changes into the project plan, and therefore it
is hard to respond to setbacks, opportunities, or changes in
requirements.</p>
<p>The waterfall project management style was initially designed in the
1970’s for use in software development projects. It was taken on by many
other industries to great success, but is now seen as an outdated
methodology for software projects.</p>
</div>
<div class="section level4">
<h4 id="agile">Agile<a class="anchor" aria-label="anchor" href="#agile"></a>
</h4>
<p>In 2001 the Manifesto for Agile Software Development was published.
The agile manifesto can be summed up as:</p>
<blockquote>
<p>We are uncovering better ways of developing software by doing it and
helping others do it. Through this work we have come to value:</p>
<p>Individuals and interactions over processes and tools Working
software over comprehensive documentation Customer collaboration over
contract negotiation Responding to change over following a plan</p>
<p>That is, while there is value in the items on the right, we value the
items on the left more.</p>
<p><a href="https://agilemanifesto.org/" class="external-link uri">https://agilemanifesto.org/</a></p>
</blockquote>
<p>The agile manifesto is based on the following principles:</p>
<ol style="list-style-type: decimal">
<li>The highest priority is to satisfy the customer through early and
continuous delivery of valuable software.</li>
<li>Welcome changing requirements, even late in development. Agile
processes harness change for the customer’s competitive advantage.</li>
<li>Deliver working software frequently, from a couple of weeks to a
couple of months, with a preference to the shorter timescale.</li>
<li>Business people and developers must work together daily throughout
the project.</li>
<li>Build projects around motivated individuals. Give them the
environment and support they need, and trust them to get the job
done.</li>
<li>The most efficient and effective method of conveying information to
and within a development team is face-to-face conversation.</li>
<li>Working software is the primary measure of progress.</li>
<li>Agile processes promote sustainable development. The sponsors,
developers, and users should be able to maintain a constant pace
indefinitely.</li>
<li>Continuous attention to technical excellence and good design
enhances agility.</li>
<li>Simplicity–the art of maximising the amount of work not done–is
essential.</li>
<li>The best architectures, requirements, and designs emerge from
self-organising teams.</li>
<li>At regular intervals, the team reflects on how to become more
effective, then tunes and adjusts its behaviour accordingly.</li>
<li>The agile mentality is designed to be able to be flexible, respond
to change, deliver a working product early and have it improve
incrementally over time.</li>
</ol>
<p>Advantages of the agile mentality include:</p>
<ul>
<li>faster deployment of working solutions</li>
<li>better quality of work</li>
<li>increased client satisfaction</li>
<li>reduced risk thanks to frequent testing and deployment</li>
<li>increased team moral</li>
<li>a project that finishes early is still able to deliver a working
result</li>
</ul>
<p>Some potential drawbacks include:</p>
<ul>
<li>potential for scope creep from continuous client feedback</li>
<li>workload management can be difficult when duties and requirements
are not known far in advance</li>
<li>short development cycles can mean that skills gaps are not
identified early leading to delays in delivery</li>
</ul>
<p>You will likely see that the Agile development mentality fits much
better with research project management including both traditional
research work and software development projects. Additionally you may
note that your organisation may employ a mix of different management
methodologies for different projects, or at different levels of the
organisation. Understanding the benefits and drawbacks of each will help
you choose a project management style that works best for your
project.</p>
</div>
</div>
<div class="section level3">
<h3 id="popular-agile-methodologies">Popular Agile methodologies<a class="anchor" aria-label="anchor" href="#popular-agile-methodologies"></a>
</h3>
<div class="section level4">
<h4 id="scrum">Scrum<a class="anchor" aria-label="anchor" href="#scrum"></a>
</h4>
<p>Scrum is mainly focused on the idea of sprints. Sprints are where the
bulk of the “work” gets done, although there is a significant amount of
effort put into the preparation and planning of each sprint, and then
the post-sprint review and retrospective. Sprints are typically 1-2
weeks in duration and will focus on a particular set of goals. During a
sprint there is usually a daily scrum at the start of the day in which
people talk about what they did the day before, what their plans are for
today, and what problems they might foresee. The sprint review is about
reviewing the work that was completed, reporting related to said work,
and identification of incomplete work. The retrospective is a more
meta-level reflection on how the sprint went, meant to identify how the
team worked together, what organisation or communication worked well or
not, and what changes could be made to make the next sprint more
productive.</p>
<p><img src="../fig/team/scrum.webp" alt="scrum" class="figure"> Image credit: <a href="https://jordanjob.me/blog/scrum-diagram/" class="external-link uri">https://jordanjob.me/blog/scrum-diagram/</a></p>
<p>The scrum methodology is based on team work and has well defined
roles. The benefits of scrum include the ability to react to changes in
requirements or resourcing, continuous testing/integration is
effectively built in, prioritisation of tasks can be adjusted throughout
the process. The disadvantages of scrum are that you need very good
organisation before each sprint to maximise productivity. Additionally
it requires that team members are able to block out a 1-2 week period in
which they focus solely on the sprint and maintain a high focus.
Clearly, scrum requires a medium to large team (5+) in order to be
effective.</p>
</div>
<div class="section level4">
<h4 id="kanban">Kanban<a class="anchor" aria-label="anchor" href="#kanban"></a>
</h4>
<p>In the Kanban methodology the main focus is on the visualisation that
is used during the development process – the Kanban board. One goal of
the board is to identify potential bottlenecks in the process. An
example board is shown below with the following features:</p>
<p><strong>Tasks</strong> that are represented as squares. Sticky notes
or cards are often used on a physical wall, or their digital
representation online.</p>
<p><strong>Columns</strong> that represent the state of each task. A
task is expected to migrate from the left most column (Ready/Backlog)
through the central columns and into the final (Done/Complete) column,
as the related work is being done.</p>
<p><strong>Work in progress limits</strong>. In order to maintain focus
and productivity, there are often limits on the number of cards that can
be placed into some of the columns. In particular the “in progress” and
“testing” columns are limited by the available people time allocated to
the project.</p>
<p><strong>Swim lanes</strong> (not shown), are rows that separate tasks
based on categories of work such as documentation, testing, or
reporting. Alternatively, colour coding of cards can be used to identify
these categories.</p>
<p><img src="../fig/team/kanban.png" alt="Kanban Methodology" class="figure"> Image
credit: <a href="https://startinfinity.com/project-management-methodologies/kanban" class="external-link uri">https://startinfinity.com/project-management-methodologies/kanban</a></p>
<p>Even when the Kanban methodology is not being explicitly used, the
visualisation process is so powerful that it often used in many other
project management strategies. It’s not uncommon to see a Kanban board
on the wall during a two week sprint.</p>
<p>The advantage of Kanban is that you have a single place to track the
progress of all the tasks, and bottle necks can be quickly identified.
One of the main disadvantages of Kanban come from people failing to
update the Kanban board as a task is being worked on (poor
communication), or updating too often (high overhead). Many project
management software tools incorporate a Kanban board and tools like JIRA
even have a way of migrating and updating tasks based on activity in a
linked GitHub repository so that people can keep the Kanban up to date
without having to visit the board itself.</p>
</div>
</div>
<div class="section level3">
<h3 id="summary-1">Summary<a class="anchor" aria-label="anchor" href="#summary-1"></a>
</h3>
<p>Communication and effective project management are critical to the
success of any collaborative project. There is no one-size-fits-all
solution, and you will need to consider the project requirements, and
the size and expertise of your team when deciding on a communication and
management strategy. Thankfully there are many project management tools
online that are free that will support whatever choice you make.</p>
</div>
</section><section><h2 class="section-heading" id="member-roles">Member roles<a class="anchor" aria-label="anchor" href="#member-roles"></a>
</h2>
<hr class="half-width">
<p>Depending on the scope of your project, the size of the team, and the
management strategy that is being used, you will have a number of roles
that need to be filled within the team. Below is a list of some common
roles that may be applicable to your project along with a short
description. It should be noted that not all roles are required for all
projects, and that the roles do not need to map to people on a 1:1
basis. It is normal to have multiple people per role and to have some
people acting in multiple roles. The most important thing is that you
consider the different roles and responsibilities, and have at least an
implicit agreement on who is going to be filling each of the roles. This
will help people to understand their responsibilities and who they
should be handing work over to or working with during the project
development.</p>
<div class="section level3">
<h3 id="roles">Roles<a class="anchor" aria-label="anchor" href="#roles"></a>
</h3>
<ul>
<li>Software Developer
<ul>
<li>Primarily focused on writing the software, fixing bugs, implementing
new features.</li>
<li>Should be responsive to issues, and provide implementation advice to
the team.</li>
<li>Documentation and Test Developer</li>
<li>Primarily focused on the creation of documentation and developing
tests.</li>
<li>Test cases and docstrings should be consistent.</li>
<li>Typically also will be responsible for automating the testing
process and reporting issues.</li>
<li>Documentation can be focused on docstrings but can also include
online documentation, help files, tutorials, and examples.</li>
</ul>
</li>
<li>Product Owner
<ul>
<li>The person who takes responsibility for setting the software project
goals.</li>
<li>This person is tasked with understanding the client/user needs and
translating them into user stories, milestones, and tasks.</li>
</ul>
</li>
<li>Domain Expert
<ul>
<li>Someone who has a good understanding of the context in which the
software will be deployed or used.</li>
<li>When developing software for astronomers, it is not essential for
all the development team to have a good understanding of the general or
specific field of application.</li>
<li>A domain expert can be an internal point of contact for the
development team when they have questions about the correctness or
utility of an aspect of theproject.</li>
</ul>
</li>
<li>Project Manager
<ul>
<li>Primarily focused on the organisation of the team, ensuring that
team members have tasks matched to their skills, and that the required
skills are available within the team.</li>
<li>The project manager will be responsible for the timing and
scheduling of work and deadlines.</li>
</ul>
</li>
<li>Reviewer
<ul>
<li>Any piece of work that is completed should be assigned to a reviewer
to ensure that the work is up to standard.</li>
<li>The reviewer should have a good understanding of the goals of a
piece of work and be able to give feedback on areas that need
improvement.</li>
<li>The reviewer should ideally not be involved in the development of
the piece of work they are reviewing.</li>
</ul>
</li>
<li>Approver
<ul>
<li>Similar to a reviewer, except that there is no requirement for an
approver to understand the implementation of the work being done.</li>
<li>An approver is focused on ensuring that the proper procedures have
been followed.</li>
</ul>
</li>
<li>User Acceptance Tester
<ul>
<li>Someone who is able to perform the necessary tests to ensure that
each of the user stories have been met.</li>
<li>Acceptance testing is typically not able to be automated and will
require manual interaction to ensure that the end user can perform the
tasks outline in the user stories.</li>
</ul>
</li>
</ul>
<p>The following workflow describes the interaction of the above roles
within a generic software project:</p>
<figure><img src="../fig/team/workflow.png" alt="Project workflow with roles" class="figure mx-auto d-block"><div class="figcaption">Project workflow with roles</div>
</figure><p>Solid lines indicate the flow of content for action, approval, or
feedback. Dashed lines indicate input in the form of advice or
oversight.</p>
<div id="group-activity-who-does-what-and-when" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="group-activity-who-does-what-and-when" class="callout-inner">
<h3 class="callout-title">GROUP Activity: Who does what and when?</h3>
<div class="callout-content">
<p>Within your software project group review the past three lessons and
discuss the following:</p>
<ul>
<li>What software development roles are required for your project?</li>
<li>What project management roles are required for your project?</li>
<li>Are there any roles that would be beneficial to your project that
are not listed?</li>
<li>How are these roles distributed among the team?</li>
<li>Are there people with multiple roles or roles shared among multiple
people?</li>
<li>Who determines the timeline and deliverables for this project?</li>
<li>Is the timeline flexible?</li>
<li>Can you classify the deliverables as one of
required/desired/optional?</li>
<li>How often and in what format should communication be managed?</li>
</ul>
<p><em>If</em> you have been involved in a previous software development
project, please share the following with your teammates:</p>
<ul>
<li>What practices worked well and could be brought into this and future
projects?</li>
<li>What practices didn’t work well and should be avoided in the
future?</li>
<li>Was the previous project larger or smaller than the current one and
how would that affect your choice of management/communication?</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="create-project-standards-and-expectations">Create project standards and expectations<a class="anchor" aria-label="anchor" href="#create-project-standards-and-expectations"></a>
</h2>
<hr class="half-width">
<p>When a single person is working on a project there will typically be
a consistency imposed simply by the fact that the developer has ‘their
way’ of doing things (though this consistency may not exist through
time). When multiple developers are working on a project it is good
practice to have an agreed up on set of standards that will be followed
to ensure that the project has a consistent style and that common
practices are followed. These practices can include how/when to test,
the branch/develop/merge cycle, documentation formats, as well as code
style. A common place to note these standards and expectations is in the
<code>CONTRIBUTING.md</code> file in the root of your software project.
This file should be considered to be supplementary to the
<code>README.md</code> file, and for a slightly different audience.
Whilst the README.md file is aimed at users of the software, the
<code>CONTRIBUTING.md</code> file is aimed at people who might develop
the software, give feedback, or submit bug/feature requests.</p>
<div class="section level3">
<h3 id="sections-to-consider-for-contributing-md">Sections to consider for <code>CONTRIBUTING.md</code>
<a class="anchor" aria-label="anchor" href="#sections-to-consider-for-contributing-md"></a>
</h3>
<ul>
<li>Welcome and encourage people to contribute to the project</li>
<li>Table of Contents (especially if the file is long)</li>
<li>Style guide
<ul>
<li>List standards for code style</li>
<li>Consider using a linter and listing it here (with settings)</li>
<li>Note the docstring format and guidelines</li>
</ul>
</li>
<li>Testing
<ul>
<li>Where the tests are located</li>
<li>How the test are run</li>
<li>The machine/environment on which the tests are expected to pass</li>
</ul>
</li>
<li>How to submit changes</li>
<li>Who can submit changes</li>
<li>Expectations for what changes will be accepted</li>
<li>The pull request approval process</li>
<li>How to report a bug
<ul>
<li>What is expected for a good bug report</li>
<li>What tags/categories should be used when submitting a report</li>
<li>How to request an “enhancement”</li>
<li>What enhancements are likely to be support and which are not</li>
</ul>
</li>
<li>Templates</li>
<li>Examples for enhancement / bug report / change requests.</li>
<li>Code of Conduct
<ul>
<li>Expectations for behaviour when contributing to the project</li>
<li>Consequences for breaching the code of conduct</li>
</ul>
</li>
<li>Email/web address for reporting breaches</li>
<li>Recognition model
<ul>
<li>Let people know how their contributions will be recognised.</li>
<li>The following may be appropriate:
<ul>
<li>An acknowledgement section on the wiki</li>
<li>Co-authorship or acknowledgements in a published paper</li>
<li>Invitation to join as github contributor</li>
<li>A shout out on social media</li>
<li>A beverage of choice</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The <code>CONTRIBUTING.md</code> file can become quite long if all of
the above are included. The key is to have a record of how people should
interact with others and with the project and that the project
maintainers adhere to these guide lines.</p>
</div>
</section><section><h2 class="section-heading" id="creating-a-github-repository">Creating a GitHub repository<a class="anchor" aria-label="anchor" href="#creating-a-github-repository"></a>
</h2>
<hr class="half-width">
<p>At the moment we have a bunch of code, documentation, and associated
files. We wish to make these available to others in the easiest way
possible. We could just zip them all up and email to collaborators.
However this means that collaborators no longer benefit from any future
development that you do, and even worse, will start asking questions
about code that may have diverged from the version you are working on. A
solution to this problem is to keep all your code under <a href="https://swcarpentry.github.io/git-novice/" class="external-link">version control</a>,
and to make use of one of the many free, online repositories to host a
copy of the code. For this lesson we’ll focus on <a href="http://github.com/" class="external-link">GitHub</a>, but <a href="http://gitlab.com/" class="external-link">gitlab</a> and <a href="https://bitbucket.org/product" class="external-link">bitbucket</a> are also good
alternatives.</p>
<div class="section level4">
<h4 id="create-an-account-on-github">Create an account on Github<a class="anchor" aria-label="anchor" href="#create-an-account-on-github"></a>
</h4>
<p>Github accounts are free, you just need an email address to sign up.
Since some academic institutions shut off your email address promptly
when your contract ends, it may be a good idea to use a
non-institutional or personal email to sign up to github or other
services that will outlast your current contract.</p>
</div>
<div class="section level4">
<h4 id="create-a-new-repository-on-github">Create a new repository on Github<a class="anchor" aria-label="anchor" href="#create-a-new-repository-on-github"></a>
</h4>
<p>Go to Github and sign in. You should be taken to a page which has a
listing of your repositories and a green button to create a new one.
Click the button and you should see a screen similar to the
following.</p>
<figure><img src="../fig/team/github_create_repo.png" alt="Create a github repo" class="figure mx-auto d-block"><div class="figcaption">Create a github repo</div>
</figure><p>For now, lets create a truly empty repository so don’t select any of
the last three boxes. Just give the repo a name (your project name is a
good choice if available). You can change the description later or fill
it in now.</p>
<p>Once you create the repository you’ll see a set of instructions about
what to do next.</p>
<figure><img src="../fig/team/github_empty_repo.png" alt="Empty github repo" class="figure mx-auto d-block"><div class="figcaption">Empty github repo</div>
</figure><p>Now we are going to go with “create a new repository from the command
line”.</p>
<p>The first part is to make a new local git repository using init / add
/ commit and to name the branch to be main (<a href="https://sfconservancy.org/news/2020/jun/23/gitbranchname/" class="external-link">instead
of master</a>).</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">git</span> add README.md</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">git</span> add requirements.txt encironment.yml</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">git</span> add sim_catalog skysim/<span class="pp">*</span>.py</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"first commit"</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span></code></pre>
</div>
<p>The next step is to link your local repository with the one that you
just created on Github. Replace <code>PaulHancock/sky_sim.git</code>
with your username and the name of the repo that you chose.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com:PaulHancock/sky_sim.git</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>After you have done the <code>git push</code> you’ll have added all
your local changes to the remote repository and you can view the new
state of the project on Github. Note how your <code>README.md</code>
file gets rendered into a nice splash page.</p>
<p>When you push to <code>origin main</code> you’ll have to authenticate
with Github, see <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" class="external-link">here</a>
for instructions on how to set that up for ssh.</p>
<p>If you set your repository to be public then anyone on the internet
can see and download your code, they can make a fork (copy) of it to
work on themselves, and can even send feature requests or bug reports
via the issue tracker. We will get into those features later, but for
now all you need to do is let your collaborators know that your code is
available on Github, send them the link, and then they can
download/clone it as needed. An added bonus is that as you make changes
to your code, and then <code>add/commit/push</code> these changes, your
collaborators can then pull those changes and get the updates without
having to bug you about it.</p>
</div>
</section><section><h2 class="section-heading" id="issue-tracking-on-github">Issue tracking on GitHub<a class="anchor" aria-label="anchor" href="#issue-tracking-on-github"></a>
</h2>
<hr class="half-width">
<p>Once your code is in the wild hopefully people will find it, use it,
and give feedback. Positive feedback in person or by email is always
nice, however there is also the issue of bugs, new feature requests, and
people wanting clarification. Dealing with these last three points
requires some organisation, and so we will learn how to use an issue
tracker for this.</p>
<p>Github, gitlab, and bitbucket all offer an form of issue tracking
that is attached to each of your software repositories. In this lesson
we’ll focus on the Github issue tracker, but the lessons learned here
are applicable to any issue tracker system.</p>
<p>The issue tracker is a way of engaging with your co-developers and
end-users to discuss any problems that people may be having when using
the software. The issue tracker is available for all Github
repositories, and enabled by default. However, publishing code on Github
does not mean that you are obligated to provide any support at all. If
you don’t intend on providing support for your software, it would be a
good idea to mention this in the <code>README.md</code> file that is
shown on the landing page so that people have clear expectations. If you
do intend to provide support and receive feedback then the issue tracker
is for you.</p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>We will cover four of the most common issues that you are likely to
see or use on the issue tracker, and give some guidance and advice about
how to approach them. We’ll cover general questions, bug reports,
feature requests, and pull requests.</p>
<p>Github issues has become a full featured work planning and project
management system (see link), most of which is beyond the scope of this
course. We will be focusing on the basic capabilities of the issue
tracker to get you and your group started. Once you are up and running
you should explore the other features.</p>
<p>To begin, let’s navigate to the github repository for our project of
choice. On the front page you should see a set of tabs. By default
you’ll be seeing the <code>&lt;&gt; code</code> tab, but we want to
select the <code>⊙ Issues</code> tab.</p>
<p><img src="../fig/team/repo-tabs-issues.png" alt="Repo no issues" class="figure">
Initially this will be blank for your project because there are no
issues (yay).</p>
</div>
<div class="section level3">
<h3 id="creating-an-issue">Creating an issue<a class="anchor" aria-label="anchor" href="#creating-an-issue"></a>
</h3>
<p>Navigate to the <code>Issues</code> tab of a repository on Github and
you’ll see a “New issue” button in green. Press this and we’ll explore
some of the options.</p>
<p>An issue has a title (or short description) and a comment (long
description). When creating an issue you can add some labels to it so
that others can easily understand what kind of issue you are reporting.
Github has a range of built in labels, and the repository owner/admins
can create more if needed.</p>
<figure><img src="../fig/team/issue-labels.png" alt="Label and issue" class="figure mx-auto d-block"><div class="figcaption">Label and issue</div>
</figure><p>Once an issue has been created, the author or repository owner/admins
can adjust the issue by assigning people to work on it, updating the
labels. This is a helpful piece of organisational work. Others can can
also comment on the issue so that there is a back and forth between the
developers, the person reporting the issue, and anyone else experiencing
the same/similar issues. When an issue is resolved it can be marked as
closed. Closed issues are not shown by default, but can be seen by
removing the <code>is:open</code> or add the <code>is:closed</code>
filter.</p>
<p>We will now go through some of the different types of issues that are
typically reported and in the next lesson we’ll have a go at
creating/resolving these issues.</p>
<div class="section level4">
<h4 id="questions">Questions<a class="anchor" aria-label="anchor" href="#questions"></a>
</h4>
<p>This tag is usually used by people asking for clarification. There is
not necessarily any issue with the code, it is just that the user
doesn’t understand something. The threaded structure of the issue
tracker makes this a useful place to have a discussion about the
question. Questions usually lead to additional documentation being
created – for example an FAQ section on the wiki for the repository.
Questions can also be escalated into bugs or feature requests.</p>
<p>If someone sends you a question via email that does not involve
personal/private information, then it is often a good idea to ask them
to post the question on the issue tracker and then discuss it there. If
the person isn’t that interested in using Github then I often just ask
for their permission to replicate the email discussion on the issue
tracker (with/without naming them depending on their preference). The
mentality is the same with people asking questions in a classroom – if
one person has a question, often there are others with the same question
who are too shy to ask. By answering the question publicly you reduce
the number of duplicate email chains that you have.</p>
</div>
<div class="section level4">
<h4 id="bug-reports">Bug reports<a class="anchor" aria-label="anchor" href="#bug-reports"></a>
</h4>
<p>Bug reports are for when people find an error in your code. The
common errors are code crashing, or code giving unexpected or wrong
output. Best practice for reporting a bug is to give as much information
as is required to reproduce the error. This is the minimum working
example (MWE), or rather the minimum example that produces the error. It
is at this point where code versions and environments can be super
helpful. Asking people to run <code>mycode --version</code> and paste
the output in the bug report can help a lot. Sometimes people work with
old versions of code and simply updating to a new version can fix the
issue. For a program crash, a copy/paste of the output/error is
useful.</p>
<p>Github allows you to add files and images to the issue tracker so
that people have the option of supplying a small amount of real data to
reproduce the error. Similarly they can screenshot a problem
(particularly useful for graphic interfaces or code that produces
plots).</p>
<p>Keep in mind that when someone posts a bug report it is because they
are having a problem. That problem is real. It may not be due to your
code. It may be due to them misusing or misunderstanding your code. It
may be due to issues with code that you are dependent on. It may be your
fault. Just remember that people are not looking to place blame, but are
looking to find a solution. Have a conversation with them in the issue
tracker to figure out what is going on and how you could help solve the
problem. If you don’t consider the bug to be a problem (it’s a feature
not a bug) then note this in the issue tracker.</p>
</div>
<div class="section level4">
<h4 id="feature-requests">Feature requests<a class="anchor" aria-label="anchor" href="#feature-requests"></a>
</h4>
<p>Sometimes a user will have an idea about how to improve or expand the
capability of the software they are using. A feature request is a way
for the user to suggest these improvements. Feature requests are not an
indication that something is wrong, but that there is an opportunity to
be better. Some example feature requests are:</p>
<ul>
<li>support additional input/output formats, or</li>
<li>support additional operating systems, or</li>
<li>provide some sanity checking before users made silly mistakes,
or</li>
<li>improve a users quality of life by combining multiple often used
functions into one, or</li>
<li>provide documentation in an alternative format (html, pdf, online
wiki etc).</li>
</ul>
<p>Feature requests are typically a user’s wish list, which if
fulfilled, will save the user time or allow them to expand the scope of
their work.</p>
</div>
<div class="section level4">
<h4 id="pull-requests">Pull requests<a class="anchor" aria-label="anchor" href="#pull-requests"></a>
</h4>
<p>For a collaborative software development project you’ll typically
have multiple people contributing code to a range of branches. When the
development of the branch is complete the developer will submit a pull
request to have their changes/updates incorporated into a reference
branch (usually dev or main). A pull request is essentially a moderated
<code>git merge</code> (or <code>git rebase</code>) that allows you to
see any conflicts, see/discuss/approve changes, and make any final
changes required before the merge actually takes place.</p>
<p>People have the option of forking (copying) your public repository
and making their own changes. If you are lucky, people will make useful
changes to your code and then offer these changes back to you via a pull
request. If these changes are aligned with the goals of your project and
meet the various style and testing conditions that you set, then the
pull request should be accepted.</p>
<p>A pull request is a request. There is no necessity for all pull
requests to be accepted, however it is good practice (and polite) to
give feedback on any pull requests that are not going to be
accepted.</p>
<p>If you would like to capture the style, testing, and documentation
expectations for your project then a file called
<code>CONTRIBUTING.md</code> in the root of the repository is a common
place to define this. You can ask that people making pull requests obey
these expectations, and it is possible to create automated ways of
ensuring these standards are obeyed.</p>
</div>
</div>
<div class="section level3">
<h3 id="summary-2">Summary<a class="anchor" aria-label="anchor" href="#summary-2"></a>
</h3>
<p>Whether your development group is just you, or three, or ten people,
the issue tracker is a free and convenient workflow management
platform.</p>
<div id="group-activity-create-discuss-and-resolve-an-issue-on-github" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="group-activity-create-discuss-and-resolve-an-issue-on-github" class="callout-inner">
<h3 class="callout-title">GROUP Activity: Create, discuss, and resolve
an issue on GitHub</h3>
<div class="callout-content">
<p>Given the previous lessons, you should consider creating or updating
the <code>CONTRIBUTING.md</code> file for your project.</p>
<ol style="list-style-type: decimal">
<li>Have one member of your team create a new issue in the GitHub issue
tracker to create/update the file and assign the issue to at least one
other member of the team.</li>
<li>Tag the issue with a tag such as <code>documentation</code>, or
create a new tag that is more relevant.</li>
<li>Within your group, use the issue tracker to discuss what sections
are required for the <code>CONTRIBUTING.md</code> file.</li>
<li>Once there is a consensus on the content, have someone make the
required changes and push the file to GitHub (or edit directly online
using the GitHub editor).</li>
<li>Try using the <code>#&lt;IssueNumber&gt;</code> format within the
git commit to link the commit to the issue discussion.</li>
<li>When an acceptable file has been created/modified mark the issue as
resolved (closed).</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="branching-and-development">Branching and development<a class="anchor" aria-label="anchor" href="#branching-and-development"></a>
</h2>
<hr class="half-width">
<p>In this lesson we’ll focus on one of the most popular git workflows:
<a href="https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow" class="external-link">Feature
Branching</a>. Many other workflows exist, but the most important
feature of any workflow is that it provides benefit to the project. See
the Atlassian tutorials on <a href="https://www.atlassian.com/git/tutorials/comparing-workflows" class="external-link">workflows</a>
for more information.</p>
<div class="section level3">
<h3 id="feature-branching">Feature branching<a class="anchor" aria-label="anchor" href="#feature-branching"></a>
</h3>
<p>At the core of the feature branching workflow is the idea that all
development should be done in a branch separate from the main branch.
The rational for this is to ensure that the main branch of the project
is always in a not-broken state. When people find your software
repository and want to try it out, they will most likely check out the
main branch and start their evaluation or usage journey from there.
Having a broken main branch is a good way to turn people away from your
software, and generate a lot of bug reports.</p>
<p>The diagram below shows the basic feature branch workflow.</p>
<figure><img src="../fig/team/Feature-Branching-Workflow.png" alt="feature branching" class="figure mx-auto d-block"><div class="figcaption">feature branching</div>
</figure><p>In the above case a feature has been requested in the issue with
ticket number 123. A developer is assigned the task of developing this
feature and begins by creating a new branch with <code>git branch</code>
using a branch name appropriate for the task. The development proceeds
on the feature branch, occasionally breaking the code, fixing the bugs,
updating tests and documentation, until finally a new version of the
code has been created which implements the new feature. At this point
the developer responsible for this branch ensures all their changes are
pushed to Github and the opens a pull request. During the pull request
other developers, and maybe the person who submitted the initial feature
request, will review and discuss the changes, ensure that the code meets
the repository standards for style and quality. Once everyone is happy
with the changes in the feature branch it is merged into main by
accepting the pull request on Github. Once the feature branch has been
merged into main it is deleted.</p>
<p>In this scheme many features branches can be created, developed, and
then deleted over the life-cycle of the project.</p>
<p>A common variation on the feature branch workflow is to include a
development branch as an intermediary between the main and feature
branches. Feature branches are created off the develop branch and then
merged back when complete. The develop branch therefore contains all of
the latest features and if new features interact with each other in
unexpected ways, this can be discovered on the develop branch rather
than the main branch. The main branch is used for tagging and releasing
new versions of the software, and these new versions can each include a
number of developments.</p>
<figure><img src="../fig/team/Feature-Branching-Workflow-1.png" alt="more feature branching" class="figure mx-auto d-block"><div class="figcaption">more feature branching</div>
</figure>
</div>
<div class="section level3">
<h3 id="setting-up-branches">Setting up branches<a class="anchor" aria-label="anchor" href="#setting-up-branches"></a>
</h3>
<p>Git does not see any branch as being special. We assign “specialness”
to a branch based on the name, but we can rename branches or change our
idea of special as we like. Regardless of how a git repository has been
set up, you can move from one branching scheme to another at any time.
Creating a new <code>develop</code> branch and then making a habit of
branching features from that instead of <code>main</code> can be done at
any time. The key thing is to make sure that the branching/development
workflow that you decide on is serving a purpose for your project. Early
on in the development of some software you may have a single developer
who is hashing out a proof of concept. In this case you may do all your
development right on the main branch. As you start to share your code
with others you may decide to move development into the develop branch,
and merge back to main only when the code-base is in a working state.
Finally, as you bring more developers into the project you may decide
that a feature-develop-main workflow is a better way to keep the various
developments from interfering with each other.</p>
<p>The point is that you should make a choice, write it down some place
(<code>CONTRIBUTING.md</code>), stick to that choice for as long as it
is useful, and revise it when needed.</p>
</div>
</section><section><h2 class="section-heading" id="an-example-development-cycle-for-fixing-a-bug">An example development cycle for fixing a bug<a class="anchor" aria-label="anchor" href="#an-example-development-cycle-for-fixing-a-bug"></a>
</h2>
<hr class="half-width">
<p>As I’m using my own code for various tasks I notice that</p>
<p><code>./scripts/sim_catalog --ref_ra=00:42:44.3 --ref_dec=-00:30:19 --radius 1 --n 1000</code></p>
<p>produces some unexpected output. A plot of the sky locations is shown
below. Note that the points have been generated around a central
declination of <code>00:30:19</code> instead of <code>-00:30:19</code>.
It seems that there is an issue with a negative reference
declination.</p>
<figure><img src="../fig/team/diagnostic-plot.png" alt="diagnostic plot" class="figure mx-auto d-block"><div class="figcaption">diagnostic plot</div>
</figure><div class="section level3">
<h3 id="reporting-the-issue">Reporting the issue<a class="anchor" aria-label="anchor" href="#reporting-the-issue"></a>
</h3>
<p>As a user, once I have identified an issue I should go to github and
make a bug report on the issue tracker. In the example project I’m the
only on the developer team so I’ll assign myself to the issue. I’ll also
label it as being a bug.</p>
<figure><img src="../fig/team/new-issue.png" alt="new issue" class="figure mx-auto d-block"><div class="figcaption">new issue</div>
</figure>
</div>
<div class="section level3">
<h3 id="confirming-the-issue">Confirming the issue<a class="anchor" aria-label="anchor" href="#confirming-the-issue"></a>
</h3>
<p>Now that the issue has been submitted I’ll tackle this problem from
the developer point of view.</p>
<p>The first thing to do is read and understand the issue. In this case
I’ll just run the script exactly as shown in the issue tracker, and see
that I get the same problem.</p>
</div>
<div class="section level3">
<h3 id="create-a-feature-branch-for-this-issue">Create a feature branch for this issue<a class="anchor" aria-label="anchor" href="#create-a-feature-branch-for-this-issue"></a>
</h3>
<p>At this point I should create a new branch in my repository with some
relevant name. Since the names of issues are not guaranteed to be unique
I will instead use the issue number (#1 in this case) as part of the
branch name. For a project with multiple developers it is also a good
idea to identify who is the ‘owner’ of each branch. An example branch
choice would be:</p>
<p><code>git branch Paulhancock/Issue#1</code></p>
<p>After some trial and error I find that the cause of the bug is in the
following code:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">def</span> generate_positions(ref_ra<span class="op">=</span><span class="st">'00:42:44.3'</span>,</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>                       ref_dec<span class="op">=</span><span class="st">'41:16:09'</span>,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                       radius<span class="op">=</span><span class="fl">1.</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                       nsources<span class="op">=</span><span class="dv">1000</span>):</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>...</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="co"># convert DMS -&gt; degrees</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    d, m, s <span class="op">=</span> ref_dec.split(<span class="st">':'</span>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    dec <span class="op">=</span> <span class="bu">int</span>(d)<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>...</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="cf">return</span> ras, decs</span></code></pre>
</div>
<p>The first thing that I do is to make a new test that will expose this
bug.</p>
</div>
<div class="section level3">
<h3 id="writing-a-test">Writing a test<a class="anchor" aria-label="anchor" href="#writing-a-test"></a>
</h3>
<p>We will now write our first formal test for our code. We’ll use a
format that will make future automated testing easier. All the tests
that we wish to run are python scripts, and we’ll place them in the
<code>tests/</code> directory. Each script will test a different
sub-module, and for the <code>sim</code> sub-module of our
<code>skysim</code> module, we’ll collect all the tests into
<code>tests/test_sim.py</code>.</p>
<p>The first thing that we need to do is import the module/code that
will be tested. In this case that will be the
<code>generate_positions</code> function within the
<code>skysim.sim</code> module.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">#! /usr/bin/env python3</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">Tests for the skysim.sim module</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="im">from</span> skysim.sim <span class="im">import</span> generate_positions</span></code></pre>
</div>
<p>Each test that we write will be contained within a separate function
whose name begins with <code>test_</code>, and which returns
<code>None</code> when the test passes, and raises an
<code>AssertionError</code> if the test fails. While we could home-brew
our own set of standards for what pass/fail looks like, we will instead
use standards set out by one of the common python testing frameworks
called <code>pytest</code>.</p>
<p>We craft a piece of code that will detect the mistake in our original
function. In this case the mistake is that the negative sign at the
start of the declination is being ignored so we get the wrong positions.
To test for this we’ll run <code>generate_positions</code> with a
declination that is negative, and small radius, so that the expected
output should consist entirely of negative declinations if the function
works properly, and probably all positive declinations if it’s
broken.</p>
<p>Our test function looks like this:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> test_negative_dec():</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">    Test for the negative dec bug noted in issue #1</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    _, decs <span class="op">=</span> generate_positions(ref_ra<span class="op">=</span><span class="st">'00:00:00'</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>                                 ref_dec<span class="op">=</span><span class="st">'-00:30:19'</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>                                 radius<span class="op">=</span><span class="fl">0.1</span>, nsources<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> np.<span class="bu">all</span>(decs <span class="op">&lt;</span> <span class="dv">0</span>):</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">AssertionError</span>(<span class="st">"Declinations should be &lt;0, but are &gt;0"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre>
</div>
<p>In order to run the tests we can add the following snippet to the end
of our script. The snippet essentially looks at all the global variables
(including function names), selects those that start with
<code>test_</code>, assumes that they are a function and calls that
function. When the function is called there is a try/except for an
<code>AssertionError</code> which reports failure if it’s caught, or
reports success if no error was raised.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="co"># introspect and run all the functions starting with 'test'</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="cf">for</span> f <span class="kw">in</span> <span class="bu">dir</span>():</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>        <span class="cf">if</span> f.startswith(<span class="st">'test'</span>):</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>                <span class="bu">globals</span>()[f]()</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">AssertionError</span> <span class="im">as</span> e:</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st"> FAILED with error: </span><span class="sc">{1}</span><span class="st">"</span>.<span class="bu">format</span>(f, e))</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st"> PASSED"</span>.<span class="bu">format</span>(f))</span></code></pre>
</div>
<p>When we run our test code we get the following result:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> python tests/test_sim.py </span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">test_negative_dec</span> FAILED with error Declinations should be <span class="op">&lt;</span>0, but are <span class="op">&gt;</span>0</span></code></pre>
</div>
<p>This failure is not a bad thing, it means that we have successfully
written a test function that will identify the bug. Now we can begin the
process of fixing the bug.</p>
</div>
<div class="section level3">
<h3 id="fixing-the-bug">Fixing the bug<a class="anchor" aria-label="anchor" href="#fixing-the-bug"></a>
</h3>
<p>Finally, once I have the test code in place, it’s time to fix the
bug. I make some modifications to account for the leading minus sign on
the declination as follows:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>    <span class="co"># convert DMS -&gt; degrees</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    d, m, s <span class="op">=</span> ref_dec.split(<span class="st">':'</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    sign <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="cf">if</span> d[<span class="dv">0</span>] <span class="op">==</span> <span class="st">'-'</span>:</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>        sign <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    dec <span class="op">=</span> sign<span class="op">*</span>(<span class="bu">abs</span>(<span class="bu">int</span>(d))<span class="op">+</span><span class="bu">int</span>(m)<span class="op">/</span><span class="dv">60</span><span class="op">+</span><span class="bu">float</span>(s)<span class="op">/</span><span class="dv">3600</span>)</span></code></pre>
</div>
<p>And I then re-run the code to make sure that the bug has been
resolved, and then run my tests:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> python tests/test_sim.py </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">test_negative_dec</span> PASSED</span></code></pre>
</div>
<p>As I develop more and more tests the list of functions run will grow.
Once the new bug has been solved I will re-run <strong>all</strong> my
tests to ensure that fixing this bug has not caused a new bug some other
place.</p>
</div>
<div class="section level3">
<h3 id="checking-in-my-work">Checking in my work<a class="anchor" aria-label="anchor" href="#checking-in-my-work"></a>
</h3>
<p>I now check in my new test code, and updated version of sim.py:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">git</span> add tests/test_sim.py</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">'expose bug from issue#1'</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">'resolve #1'</span> skysim/sim.py</span></code></pre>
</div>
<p>Note that I have used <code>#1</code> to refer to the issue from
within my commit message. When viewed on Github these commit messages
will automatically generate a link to the issue, and when viewing the
issue I should be able to see the reverse link.</p>
<p>I now push the bug fix (and my new branch) to the Github repo.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--set-upstream</span> origin Paulhancock/Issue#1</span></code></pre>
</div>
<p>If we look on the original issue page, we can see the link to the
commit.</p>
<figure><img src="../fig/team/issue-reference.png" alt="issue referenced in commit" class="figure mx-auto d-block"><div class="figcaption">issue referenced in commit</div>
</figure>
</div>
<div class="section level3">
<h3 id="creating-a-pull-request">Creating a pull request<a class="anchor" aria-label="anchor" href="#creating-a-pull-request"></a>
</h3>
<p>When we navigate to the landing page for our repository we will see a
new yellow banner appear as below:</p>
<figure><img src="../fig/team/repo-with-updates-on-branch.png" alt="github issue with recent updates on branch" class="figure mx-auto d-block"><div class="figcaption">github issue with recent updates on branch</div>
</figure><p>We can click the green “Compare &amp; pull request” button to start a
new pull request. Alternatively we can go to the “Pull requests” tab.
Either way we enter a title and description for the pull request.</p>
<p>Note that the assign/label/project/milestone options that we see on
the pull request form are mostly the same as on the Issues form. This is
because pull requests are just special types of issues. They share a
numbering scheme. This is the first pull request for this repository but
it will be labelled <code>#2</code> because there is an existing issue
<code>#1</code>. One difference between a pull request and an issue is
that a pull request can have a reviewer assigned to it. Here I have
selected myself as the assignee (the person looking after the pull
request), and <code>SkyWa7ch3r</code> as the reviewer (the person who
will review my code and sign off when they are happy).</p>
<figure><img src="../fig/team/new-PR.png" alt="new pull request" class="figure mx-auto d-block"><div class="figcaption">new pull request</div>
</figure><p>Github does some work in the background to let me know that there
will be no conflicts between this branch and the main branch, so that it
is ‘safe’ to do the merge. Currently there is no indication that the
code works or passes our tests. For now we let the reviwer do this work.
The reviewer would pull the <code>Paulhancock/Issue#1</code> branch, run
the tests and see that they pass, then come back to github and make a
note of it in the discussion. (In a later lesson we’ll see how we can
make Github do most of this work for us using Github actions.)</p>
<figure><img src="../fig/team/PR-with-reviewer-comment.png" alt="pull request with a reviewer comment" class="figure mx-auto d-block"><div class="figcaption">pull request with a reviewer comment</div>
</figure><p>Once our reviewer(s) are happy with the changes we can merge our
branch back into main by pressing the green button. This will create a
new commit on the main branch in order to do the merge, so we’ll be
asked for a title/description for the commit. It is pre-filled for us.
Once the merge is complete Github will let us know that all is good, and
suggest that we delete the branch. Since the feature is merged we no
longer need this branch and will delete it.</p>
<figure><img src="../fig/team/PR-merged.png" alt="pull request merged" class="figure mx-auto d-block"><div class="figcaption">pull request merged</div>
</figure>
</div>
<div class="section level3">
<h3 id="closing-the-issue">Closing the issue<a class="anchor" aria-label="anchor" href="#closing-the-issue"></a>
</h3>
<p>If we navigate back to the issues tab, we’ll see that the issue
related to the pull request has also been closed for us. This is because
we wrote <code>resolve #1</code> as a comment for our commit. When that
commit is merged into the main branch git will automatically resolve
(close) the linked issue. If we didn’t use this smart linking capability
we can still go back to the open issue and close it. Either way it would
be good to leave a note about the issue being fixed.</p>
</div>
<div class="section level3">
<h3 id="summary-3">Summary<a class="anchor" aria-label="anchor" href="#summary-3"></a>
</h3>
<p>The development cycle for fixing a bug is as follows:</p>
<ul>
<li>identify bug</li>
<li>report bug on the Gihub issue tracker</li>
<li>confirm that the bug exists</li>
<li>create a feature branch</li>
<li>write a test to expose the bug/error</li>
<li>fix the bug</li>
<li>run all tests</li>
<li>commit changes</li>
<li>create a pull request</li>
<li>merge the branch into main and delete the feature branch</li>
</ul>
<p>In this example we had one person doing the reporting/fixing. Usually
you’ll have an end user doing the finding/report part, and then one or
more developers doing the remainder.</p>
<div id="group-activity-working-on-the-same-problem" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="group-activity-working-on-the-same-problem" class="callout-inner">
<h3 class="callout-title">GROUP Activity: Working on the same
problem</h3>
<div class="callout-content">
<p>In this activity you will practice working in a team as you go
through a simple development cycle.</p>
<ol style="list-style-type: decimal">
<li>As a group, identify a minor issue with your current project. (Don’t
feel bad, the only projects that don’t have issues are the ones that no
one is using).</li>
<li>Since the focus here is on the life-cycle of a bug, choose a small
thing that is easy to identify and fix.</li>
<li>A function without a docstring would be ideal (and probably easy to
find).</li>
<li>Have one team member create an issue that describes the problem and
explains what a solution would look like.</li>
<li>eg “myFunc(4) should return a filename”, or “myFunc should have a
docstring in <format>”.</format>
</li>
<li>Create a new branch for development work called <feature> or
Issue<number>.</number></feature>
</li>
<li>Assign <strong>at least two team members</strong> to work on this
issue.</li>
<li>Have <strong>one team member</strong> create a solution for the
issue and then:</li>
<li>Push the changes to the remote repository,</li>
<li>Open a pull request to merge this branch into main,</li>
<li>Set the assignees to be all the members working on the issue,</li>
<li>Set the reviewer to be a team member who is not working on the code
(if you have enough people, otherwise choose someone other than the pull
request creator), and</li>
<li>Add whatever labels look appropriate.</li>
<li>Have <strong>the other team members</strong>:</li>
<li>View the changes via the “files changed” tab of the pull
request,</li>
<li>Comment on what is good and what needs improving,</li>
<li>Pull the active branch to their local machine,</li>
<li>Make an improvement and commit the change, and</li>
<li>Push the change back to the active branch.</li>
<li>Everyone should have an opportunity to make comments and changes,
but you’ll need to coordinate who is doing what and when to minimise the
number of merge conflicts that occur.</li>
<li>Once everyone has had a chance to view/comment/change, have the
reviewer sign off on the pull request and merge the changes into the
main branch.</li>
</ol>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-ReusableCode"><p>Content from <a href="ReusableCode.html">Making Code Reusable by You and Your Group</a></p>
<hr>
<p>Last updated on 2026-02-25 |

        <a href="https://github.com/PaulHancock/Lesson-Testing/edit/main/episodes/ReusableCode.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 180 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are some pro/con of developing in a team?</li>
<li>What are some common team roles?</li>
<li>How can GitHub help managing tasks in a group project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Gain experience developing software in a team environment</li>
<li>Understand some common project management styles</li>
<li>Create a new GitHub repo and push our project</li>
<li>Experience a full development cycle with our test project</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="separating-the-ui-from-the-functionality">Separating the UI from the functionality<a class="anchor" aria-label="anchor" href="#separating-the-ui-from-the-functionality"></a>
</h2>
<hr class="half-width">
<p>A programming principle called <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" class="external-link">model-view-controller</a>
(MVC) is recommended when designing code. Under MVC, programs are
separated into one of three components, the model (library) which
provides the core functionality, a viewer which provides a visualisation
of the results, and a controller which links the user to the model. In
our test code the model would be the two functions
<code>generate_positions</code> and <code>write_file</code>, whilst the
controller would be the command line interface. [In this example we
could consider the file output to be the viewer.]</p>
<p>At the end of cycle1 we had a single file, <code>sim.py</code>, which
contained both the model and the controller. Our first task will be to
separate this into two parts. The first part will be a python module
which provides the functionality, and the second will be a script which
receives user input and calls the library functions.</p>
<div class="section level3">
<h3 id="creating-a-python-module">Creating a python module<a class="anchor" aria-label="anchor" href="#creating-a-python-module"></a>
</h3>
<p>Python modules, like the <code>numpy</code> module that we have
already used, can be easily created by obeying a simple directory/file
structure. If we want to create a module called <code>skysim</code> then
all we need to do is create a directory with the same name, and add an
empty file called <code>__init__.py</code>. Let’s do that now:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> mkdir skysim</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> touch skysim/__init__.py</span></code></pre>
</div>
<p>To access the module we simply use <code>import skysim</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> python</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> import <span class="ex">skysim</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> dir<span class="kw">(</span><span class="ex">skysim</span><span class="kw">)</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="ex">[</span><span class="st">'__builtins__'</span><span class="ex">,</span> <span class="st">'__cached__'</span>, <span class="st">'__doc__'</span>, <span class="st">'__file__'</span>, <span class="st">'__loader__'</span>, <span class="st">'__name__'</span>, <span class="st">'__package__'</span>, <span class="st">'__path__'</span>, <span class="st">'__spec__'</span>]</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre>
</div>
<p>We can see that the <code>skysim</code> module already has some
attributes defined, and they all start with a double underscore (
<code>__</code> or ‘dunder’ ). The <strong>file</strong> attribute is a
string containing the full path to the file <code>__init__.py</code>.
The <code>__name__</code> attribute will contain the string
<code>skysim</code> because this is the name of the module. If we had
renamed the module on import (using <code>import skysim as other</code>)
then the <code>__name__</code> attribute would still be the same. Feel
free to explore the other attributes.</p>
<p>In order to add some functions or attributes to our module we can
simply add our <code>sim.py</code> file to the <code>skysim</code>
directory. If we do this and then restart our python interpreter we can
import all the functions/modules/variables provided by
<code>sim.py</code> by doing <code>from skysim import sim</code>. For
example:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> python</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> from <span class="ex">skysim</span> import sim</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> dir<span class="kw">(</span><span class="ex">sim</span><span class="kw">)</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="ex">[</span><span class="st">'__builtins__'</span><span class="ex">,</span> <span class="st">'__cached__'</span>, <span class="st">'__doc__'</span>, <span class="st">'__file__'</span>, <span class="st">'__loader__'</span>, <span class="st">'__name__'</span>, <span class="st">'__package__'</span>, <span class="st">'__spec__'</span>, <span class="st">'argparse'</span>, <span class="st">'generate_positions'</span>, <span class="st">'math'</span>, <span class="st">'np'</span>, <span class="st">'write_file'</span>]</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre>
</div>
<p>Above we can see the two functions that we defined, as well as the
modules that we imported (<code>argparse</code>, <code>math</code>, and
<code>np</code>). We now have a library that we can import. When we
import a module, all the code within that file is executed. In the case
of our <code>sim.py</code> file this means that we import some other
modules and then define some functions.</p>
<p>If a python file is run via <code>python myfile.py</code> then the
<code>__name__</code> attribute will be set to the string
<code>__main__</code>. However if a python file is imported via import
myfile or <code>import myfile as mf</code>, then the
<code>__name__</code> attribute is set to be the filename (without the
<code>.py</code> extension). Therefore when we import
<code>sim.py</code> as part of our module the CLI that we created with
argparse does not get executed because we hid it within an
<code>if __name__ == "__main__"</code> clause.</p>
</div>
<div class="section level3">
<h3 id="creating-a-stand-alone-script">Creating a stand alone script<a class="anchor" aria-label="anchor" href="#creating-a-stand-alone-script"></a>
</h3>
<p>To create a script that calls this library we create a new file
called <code>sim_catalog</code>. We then move all the content of the
<code>if __name__ == "__main__"</code> clause out of <code>sim.py</code>
and into our new file. Finally, we the import the functions that we need
from our newly created module.</p>
<p>Our new script looks like this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">#! /usr/bin/env python</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="im">from</span> skysim.sim <span class="im">import</span> generate_positions, write_file</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="co"># Set up the parser with all the options that you want</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    parser <span class="op">=</span> argparse.ArgumentParser(prog<span class="op">=</span><span class="st">'sim'</span>)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    group1 <span class="op">=</span> parser.add_argument_group()</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>    group1.add_argument(<span class="st">'--ref_ra'</span>, dest<span class="op">=</span><span class="st">'ref_ra'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'00:42:44.3'</span>,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Central/reference RA position HH:MM:SS.S format'</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>    group1.add_argument(<span class="st">'--ref_dec'</span>, dest<span class="op">=</span><span class="st">'ref_dec'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'41:16:09'</span>,</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Central/reference Dec position DD:MM:SS.S format'</span>)</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>    group1.add_argument(<span class="st">'--radius'</span>, dest<span class="op">=</span><span class="st">'radius'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>, default<span class="op">=</span><span class="fl">1.</span>,</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'radius within which the new positions are generated (deg)'</span>)</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>    group1.add_argument(<span class="st">'--n'</span>, dest<span class="op">=</span><span class="st">'nsources'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, default<span class="op">=</span><span class="dv">1_000</span>,</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Number of positions to generate'</span>)</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>    group1.add_argument(<span class="st">'--out'</span>, dest<span class="op">=</span><span class="st">'outfile'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>, default<span class="op">=</span><span class="st">'catalog.csv'</span>,</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>                        <span class="bu">help</span><span class="op">=</span><span class="st">'Filename for saving output (csv format)'</span>)</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>    <span class="co"># parse the command line input</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>    options <span class="op">=</span> parser.parse_args()</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>    ras, decs <span class="op">=</span> generate_positions(ref_ra<span class="op">=</span>options.ref_ra,</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>                                   ref_dec<span class="op">=</span>options.ref_dec,</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>                                   radius<span class="op">=</span>options.radius,</span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>                                   nsources<span class="op">=</span>options.nsources)</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>    write_file(ras, decs, outfile<span class="op">=</span>options.outfile)</span></code></pre>
</div>
<p>Note that we have a <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)" class="external-link">shebang</a> line
(#!) to indicate that we want to use the python interpreter. This means
that we can make the file executable and then execute it like any other
program without the user having to explicitly type <code>python</code>.
It is not shown here, but I have made the file executable so that I can
just type <code>./sim_catalog</code> to run the above code.</p>
<p>We have now separated our interface (<code>sim_catalog</code>) from
the model (<code>skysim.sim</code>). Currently the user will not notice
any difference because the functionality hasn’t changed. However, we are
now able to import the model into other python scripts. Our code is
becoming easier to re-use by ourselves (and other developers).</p>
</div>
<div class="section level3">
<h3 id="updating-our-test-script">Updating our test script<a class="anchor" aria-label="anchor" href="#updating-our-test-script"></a>
</h3>
<p>Finally, we just need to update our test script so that it will use
the new <code>sim_catalog</code> script to do the testing.</p>
<div id="solo-activity-command-line-interface" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="solo-activity-command-line-interface" class="callout-inner">
<h3 class="callout-title">SOLO Activity: Command line interface</h3>
<div class="callout-content">
<p>A command line interface (CLI) is a good way to allow non-developers
to use your software. In the previous lesson we saw how we can separate
the functionality of your software from the user interface by creating a
module with the core functionality and a script to provide the user
interface.</p>
<p>Using the <a href="https://github.com/ADACS-Australia/MAP21B-Training-BPindor/tree/cycle2" class="external-link">example
project</a> we developed earlier:</p>
<ol style="list-style-type: decimal">
<li>Update the <code>scripts/sim_catalog</code> file so that it now has
two argument groups,
<ol style="list-style-type: decimal">
<li>The current <code>group1</code> should have a <code>title</code> of
“Program settings”</li>
<li>The second group (<code>group2</code>) should have a
<code>title</code> of “Metadata”</li>
</ol>
</li>
<li>Add the following parameters to <code>group2</code>:
<ol style="list-style-type: decimal">
<li>
<code>--version</code>, which will print the version</li>
<li>
<code>--date</code>, to show the last modified date</li>
<li>
<code>--author</code>, to list the authors</li>
</ol>
</li>
<li>All the parameters in <code>group2</code> should have a
<code>default</code> value of <code>False</code>, and then use
<code>action='store_true'</code> to set the parameter to
<code>True</code> when this option is supplied by the user.</li>
<li>[Optional] Provide shortened versions of the parameters in
<code>group2</code> of the format <code>-c</code> etc..</li>
<li>Write the necessary code so that when any of the options in
<code>group2</code> are set, all the required information is printed and
the program exits without performing the simulation.</li>
</ol>
<p>For now you’ll have to define some variables within the script to
hold these values, but later on we’ll demonstrate a better place to
store them.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="setting-up-a-python-environment">Setting up a python environment<a class="anchor" aria-label="anchor" href="#setting-up-a-python-environment"></a>
</h2>
<hr class="half-width">
<p>You python environment is the ecosystem of modules that you have
installed. If you have used <code>pip</code> to install modules then
<code>pip freeze</code> will give you a list of all the currently
installed modules and their versions. If you used <code>conda</code>
(anaconda) to install modules then <code>conda list</code> will do the
same. If you use a combination of the two then you are likely heading
toward the following problem:</p>
<figure><img src="../fig/reuse/python_environment.png" alt="From https://xkcd.com/1987" class="figure mx-auto d-block"><div class="figcaption">From <a href="https://xkcd.com/1987" class="external-link uri">https://xkcd.com/1987</a>
</div>
</figure><p>If you have ever sent a python script to a collaborator only for them
to say that it doesn’t work on their machine, it’s likely that they have
a different set of modules installed, or that they have a different
version of the modules installed. It may feel like installing all the
modules at once would help out. But different software may depend on
different versions of the same modules which would require you to
uninstall/reinstall different versions of modules depending on what you
are working on.</p>
<p>A better solution is to install multiple different python
environments – one for each piece of software that you wish to run. To
do this we will work with virtual environments.</p>
<div class="section level3">
<h3 id="creating-a-new-virtual-environment">Creating a new virtual environment<a class="anchor" aria-label="anchor" href="#creating-a-new-virtual-environment"></a>
</h3>
<p>With the introduction of python 3, there is now a new module called
<code>venv</code> which handles the creation of new virtual
environments. See the <a href="https://docs.python.org/3/tutorial/venv.html" class="external-link">python
documentation</a> for a full breakdown. The short version is that we can
create a new virtual environment simply via:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> venv [--prompt PROMPT] ENV_DIR </span></code></pre>
</div>
<p>where PROMPT is the name of the virtual environment, and ENV_DIR is
the location in which all the files for this environment will be stored.
A nice place to store your ENV_DIR is in your home directory.</p>
<p>Once you have created a virtual environment you can activate it
via:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="bu">source</span> ENV_DIR/bin/activate</span></code></pre>
</div>
<p>I find it nice to have a descriptive ENV_DIR such as
<code>.env-jupyter</code> or <code>.env-py3-myproject</code> (where the
‘.’ indicates a hidden directory in linux) but a short PROMPT such as
<code>jpy</code>, or <code>py3-myproj</code>. The reason for this is
that once your project is activated, your terminal will have PROMPT
added to the start of your command line. Since my PROMPT and ENV_DIR are
different I then add an alias in my <code>~/.bash_aliases</code> file to
link them:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">alias</span> jpy=<span class="st">'source ~/.env-jupyter/bin/activate'</span></span></code></pre>
</div>
<p>Creating a new virtual environment is easy, and if you get it wrong,
you can just delete the ENV_DIR. The other nice thing is that if you are
on a Linux or OSX machine your system version of python (which is used
by the OS) can remain untouched, and won’t cause your system to become
flaky when you totally mess up your python installs.</p>
<p>If you use Anaconda to install/manage your python modules, then you
can simply navigate to the ‘environments’ tab, and create a new
environment with the click of a button.</p>
<p>Now that we have created a new python environment we need to install
some things into it.</p>
</div>
</section><section><h2 class="section-heading" id="preserving-environments-with-requirements-txt-or-environment-yml">Preserving environments with requirements.txt or
environment.yml<a class="anchor" aria-label="anchor" href="#preserving-environments-with-requirements-txt-or-environment-yml"></a>
</h2>
<hr class="half-width">
<p>Once you and your collaborators are comfortable managing different
python virtual environments you are all set to start exporting and
importing those environments for sharing.</p>
<p>The simplest way to share a python environment is to use a file which
lists all the modules that are installed, and even their versions. Pip
and conda have different ways of capturing dependencies.</p>
<div class="section level3">
<h3 id="pip-requirements-txt">pip – requirements.txt<a class="anchor" aria-label="anchor" href="#pip-requirements-txt"></a>
</h3>
<p>For our example project we have used only one non-builtin python
module: <code>numpy</code>. To specify that this is module is required
we can create a file called <code>requirements.txt</code> and add the
following:</p>
<blockquote>
<p>numpy&gt;=1.19</p>
</blockquote>
<p>where the <code>&gt;=1.19</code> indicates that version 1.19 or
greater will be fine. See the <a href="https://pip.pypa.io/en/stable/reference/requirements-file-format/#example" class="external-link">pip
documentation</a> for examples on how you can specify different version
numbers, ranges, and exclusions. By default each module listed will be
installed from the python package index (pypi), but you can also
indicate other locations including local files/folders or github
repositories.</p>
<p>If you don’t know what versions or dependencies you need for your
particular project then you can get a hint by inspecting your current
environment using <code>pip freeze</code>. This will list all the
installed modules and versions for the current environment. The list
will be much longer than you anticipate! To get a minimal list, start
with an empty environment and then keep installing modules until your
software will run, then run
<code>pip freeze &gt;&gt; requirements.txt</code>.</p>
<p>To install all the modules within a <code>requirements.txt</code>
file you run pip:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">-r</span> requirements.txt</span></code></pre>
</div>
<p>You now have a way of preserving and sharing your python environment
with others. It is good practice to keep a <code>requirements.txt</code>
file in your project directory, and to have this as part of your version
control repository.</p>
</div>
<div class="section level3">
<h3 id="conda-environment-yml">conda – environment.yml<a class="anchor" aria-label="anchor" href="#conda-environment-yml"></a>
</h3>
<p>Anaconda uses a slightly different file format to capture essentially
the same information. For the above example our file would look
like:</p>
<pre><code><span><span class="va">dependencies</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">numpy</span><span class="op">&gt;=</span><span class="fl">1.19</span></span></code></pre>
<p>Anaconda is able to reproduce not just the python modules, but the
entire virtual environment including the versions of python and anaconda
and also other non-python based codes. You can generate a good starting
point using <code>conda list --export</code>.</p>
<p>In order to 1) not dictate your users’ virtual environment management
choices, and 2) not duplicate information, the following method will
link your <code>environment.yml</code> and <code>requirements.txt</code>
files:</p>
<pre><code>name: my-env
dependencies:
  - python&gt;=3.8
  - anaconda
  - pip
  - pip:
    - -r requirements.txt</code></pre>
<p>Conda understands pip formatted requirements, but pip doesn’t
understand conda environment files, so there is no inverse version of
the above linking.</p>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>In combination with a python virtual environment (previous lesson),
we now have a greater expectation that our software will run the same on
other people’s machines as is does on our own (test) machine. There will
be some localisation (win/linux/osx) or language (en, ch, fr, etc)
difference that might cause some problems down the line, but we have
solved one of the most common sources of error.</p>
</div>
</section><section><h2 class="section-heading" id="useful-project-metadata">Useful project metadata<a class="anchor" aria-label="anchor" href="#useful-project-metadata"></a>
</h2>
<hr class="half-width">
<p>Previously we used an empty <code>__init__.py</code> file in a
directory to cause python to interpret that directory as a module. There
is meta data that we wish to store about our project, and the
<code>__init__.py</code> file is an excellent place to do this.</p>
<div class="section level4">
<h4 id="versioning">Versioning<a class="anchor" aria-label="anchor" href="#versioning"></a>
</h4>
<p>One of the most common items to store is the version of your
software. For most modules the <code>module.__version__</code> is used
to store this information. There are many conventions for software
versioning and no one single correct answer. Versioning is the practice
of using unique numbers of names to refer to the different states of a
software project or code. A common choice is to use major/minor/patch
versions for the code such as <code>4.2.1</code>, which is used by most
python modules. See <a href="https://semver.org/spec/v2.0.0.html" class="external-link">semver.org</a> for a
description on the how and why of semantic versioning.</p>
<p>A major version change will usually mean that the code has changed in
some fundamental way, and that people should not expect compatibility
between the two versions. For example: there were many changes between
the last version of python 2 (2.7) and python 3 that meant not all code
would work on both versions. If you have been using python for a while,
or have seen python code from ~10 years ago (or ~2 years ago if it’s
astronomers’ code!), then you’ll have seen some of these changes. Most
notable is the change from <code>print "hello"</code> to
<code>print("hello")</code>.</p>
<p>A minor version change will usually indicate changes have been made
that do not break compatibility within the major version. This would
usually include the addition of new functionality that is compatible
with (but not available in) previous versions of the software.</p>
<p>A patch version is used to distinguish states of development that do
not change the intended functionality of the code base. These include
bug fixes, security patches, or documentation updates.</p>
<p>Typically version 1.0 is used to represent the first stable/complete
version of the software, and so versions such as 0.9 are used to
indicate development versions.</p>
</div>
<div class="section level4">
<h4 id="modification-date">Modification date<a class="anchor" aria-label="anchor" href="#modification-date"></a>
</h4>
<p>In addition to a semantic versioning noted above, some developers
find it useful to record the date of last change for each version of
their software (and indeed each file/module within). For this purpose we
would make use of the <code>module.__date__</code> attribute. Date
formats are a perpetual problem for people and computers alike so it is
recommended that a single format be chosen and used consistently
throughout a project. The format YYYY-MM-DD is recommended as it has the
advantage of being time sorted when sorted alphanumerically.</p>
</div>
<div class="section level4">
<h4 id="authors-developers">Authors / developers<a class="anchor" aria-label="anchor" href="#authors-developers"></a>
</h4>
<p>One method tracking attribution (or blame) in a project is to use the
<code>module.__author__</code> attribute to store the author name as
either a string or list. For a project with few developers this can be
handled easily. For larger groups or projects <code>git blame</code>
would be a better method for tracking contributions on a line by line
basis.</p>
</div>
<div class="section level4">
<h4 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h4>
<p>For any researcher writing software there is an eternal battle
between writing good code and “doing science”. Acknowledging the use of
software is common but not yet standard or required when publishing
papers. To make it easier for people to cite your work you can use an
attribute such as <code>module.__citation__</code> to employer people to
cite your work, link to papers or code repositories that should be cited
or referenced. When combined with a <code>--cite</code> command line
option, this is a great way for people to properly credit your work. If
your target audience are researchers then it can be very useful to store
a bibtex entry in the citation string so that people can just copy/paste
into their LaTeX document.</p>
</div>
<div class="section level3">
<h3 id="meta-data-for-our-example-project">Meta data for our example project<a class="anchor" aria-label="anchor" href="#meta-data-for-our-example-project"></a>
</h3>
<p>The <code>__init__</code> file in our example project can be updated
to include the above recommendations. Note the format of the
<code>__citation__</code> string being multi line, and including LaTeX
formatting.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># /usr/bin/env python</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>__author__ <span class="op">=</span> [<span class="st">'Dev One'</span>, <span class="st">'Contrib Two'</span>]</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>__version__ <span class="op">=</span> <span class="st">'0.9'</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>__date__ <span class="op">=</span> <span class="st">'2021-12-02'</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>__citation__ <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="st">% If this work is used to support a publication please</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="sc">% c</span><span class="st">ite the following publication:</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="st">% Description of This code</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="st">@ARTICLE{ExcellentCode_2022,</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="st">   author = </span><span class="sc">{{</span><span class="st">One}, D. and </span><span class="sc">{Two}</span><span class="st">, C. and </span><span class="sc">{People}</span><span class="st">, O},</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="st">    title = "{Awesome sauce code for astronomy projects}",</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="st">  journal = </span><span class="sc">{Nature}</span><span class="st">,</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="st"> keywords = {techniques: image processing, catalogues, surveys},</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="st">     year = 2021,</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="st">    month = may,</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="st">   volume = 1337,</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="st">    pages = {11-15},</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="st">      doi = {some.doi/link.in.here}</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a><span class="st">% It is also appropriate to link to the following repository:</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="st">https://github.com/devone/AwesomeSauce</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="st">"""</span></span></code></pre>
</div>
<div id="group-activity-metadata" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="group-activity-metadata" class="callout-inner">
<h3 class="callout-title">GROUP Activity: metadata</h3>
<div class="callout-content">
<p>In the past few lessons we learned about virtual environments, and
project metadata. We will now put some of these lessons in to
practice.</p>
<p>As a group:</p>
<ol style="list-style-type: decimal">
<li>Decide upon a versioning scheme that will be used for the project,
and if none currently exists, agree on what the current version number
should be.</li>
<li>Discuss how people should give recognition for using this project as
part of their research (or other) work.</li>
<li>Create issues on github that request the following changes. Share
the creation and assignee responsibilities between group members.
<ol style="list-style-type: decimal">
<li>The creation of a <code>requirements.txt</code> and
<code>environment.yml</code> file that include the dependencies for your
project. For each dependency specify the minimum version requirement to
be the smallest version that is used by one of the group members.</li>
<li>Record the agreed upon current version number of the project in the
<code>&lt;project&gt;/__init__.py</code> file.</li>
<li>Record the authors in an agreed upon order in the
<code>__init__.py</code> file</li>
<li>Record the last modification date in the <code>__init__.py</code>
file</li>
</ol>
</li>
<li>Describe the method by which people should cite or give recognition
for using this project</li>
<li>For each of the issues above, have a group member follow the
branch-develop-pull request workflow that was described earlier. When
creating pull requests set the reviewer to include the person who
created the initial issue.</li>
<li>[Optional] Once all the pull requests have been resolved, repeat the
previous SOLO activity for your project (creating a command line
interface that will give users access to the <code>--cite</code>,
<code>--date</code>, <code>--version</code>, <code>--author</code>
information.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="licensing-your-work">Licensing your work<a class="anchor" aria-label="anchor" href="#licensing-your-work"></a>
</h2>
<hr class="half-width">
<p>By default any creative work is under an exclusive copyright which
means that the author(s) of that work have a say in what others can do
with it. In general this means that no one can build upon, use, reuse,
or distribute your work without your permission. To use or build upon
software that has no licence requires the new developer/user to contact
the original author(s) and get permission. This is time consuming,
annoying, and often not done. If you want your work to be used by others
your best bet is to provide an explicit software license as part of your
project so that people know up front what is allowed and not allowed. A
common way of licensing software is to provide a <code>LICENSE</code>
(or <code>LICENCE</code>) file in the root of the project.
(Alternatively you can provide the license as part of the header for
each file, but that’s a lot of repetition, and goes against our good
practice of don’t repeat yourself).</p>
<div class="section level3">
<h3 id="choosing-a-software-licence-for-your-project">Choosing a software licence for your project<a class="anchor" aria-label="anchor" href="#choosing-a-software-licence-for-your-project"></a>
</h3>
<p>Your home institute may have opinions/guidelines for appropriate
licensing software. Ask around and follow the advice of you local
experts.</p>
<p>If you don’t have any local constraints on licensing your software
you can use one of the many license templates available on Github. To
use a template you need to log into your Github account, navigate to
your repository and then click the “add file”-&gt;”create new file”
button. You will be presented with a blank text editor and be asked for
a file name. If you use <code>LICENSE.md</code> (or any similar
spelling/extension) then you’ll see a new button appear on the right of
the screen saying “Choose a licence template”. Click that.</p>
<figure><img src="../fig/reuse/empty-licence.png" alt="Editing the LICENSE.md file" class="figure mx-auto d-block"><div class="figcaption">Editing the LICENSE.md file</div>
</figure><p>You’ll then see a list of common software licences that you can
choose from. If you are brave you can read each of them in full.
Alternatively you can simply read the Github provided summary at the top
of what the permissions/limitations are. Choose one that feels right to
you and then press “Review and submit”. This will create a new licence
file.</p>
<figure><img src="../fig/reuse/licence-helper.png" alt="The github license helper" class="figure mx-auto d-block"><div class="figcaption">The github license helper</div>
</figure><p>Once you have a license file GitHub will add a badge to the “About”
section of your project like this:</p>
<figure><img src="../fig/reuse/licence-listed.png" alt="Your license on github" class="figure mx-auto d-block"><div class="figcaption">Your license on github</div>
</figure><p>As you can see, for the example project I chose the GNU General
public licence.</p>
</div>
</section><section><h2 class="section-heading" id="basic-documentation-in-readme-md">Basic documentation in README.md<a class="anchor" aria-label="anchor" href="#basic-documentation-in-readme-md"></a>
</h2>
<hr class="half-width">
<p>Upon downloading new software, the first point of call for many
people is to look for some help on how to install and use the software.
This is where a file such as <code>INSTRUCTIONS</code>,
<code>INSTALL</code> or <code>README</code> can come in handy. The name
of the file says what it is and will attract the attention of the user.
While these files can be in any format, and have any name, a common
choice is <code>README.md</code>. If you have navigated to a GitHub
software repository, and seen the nice documentation available on the
front page, then this has been generated from the <code>README.md</code>
file.</p>
<p>The markdown format (<a href="https://www.markdownguide.org/" class="external-link">guide
here</a>) is a simple to use, future proof, platform independent,
document format that can be rendered into a range of other formats. As a
bonus, the raw files are easily read and written by humans.</p>
<div class="section level4">
<h4 id="things-to-consider-for-your-readme-md-file">Things to consider for your README.md file<a class="anchor" aria-label="anchor" href="#things-to-consider-for-your-readme-md-file"></a>
</h4>
<ul>
<li>The name of the project</li>
<li>A description of the purpose of the software</li>
<li>Maybe a one liner for each script</li>
<li>Install instructions</li>
<li>List some high level dependencies</li>
<li>Usage instructions</li>
<li>If you have a CLI then the output of <code>mycode --help</code> is
appropriate to include verbatim</li>
<li>A link to documentation</li>
<li>Author information and contact details (email, or just a link to
github issues)</li>
<li>A note on how people should credit this work</li>
</ul>
</div>
<div class="section level4">
<h4 id="readme-md-for-our-example-project">README.md for our example project<a class="anchor" aria-label="anchor" href="#readme-md-for-our-example-project"></a>
</h4>
<blockquote>
<h1 id="skysim">SkySim</h1>
<p>This project was built in order to simulate source
(star/galaxy/other) positions over an area of sky.</p>
<h2 id="installing">Installing</h2>
<p>This project relies only on python built-ins and the numpy library.
Use <code>pip install -r requirements.txt</code> if you don’t yet meet
these requirements.</p>
<h2 id="usage">Usage</h2>
<p>The main entry point for this project is
<code>sim_catalog</code>:</p>
<pre><code>./sim_catalog --help
usage: sim [-h] [--ref_ra REF_RA] [--ref_dec REF_DEC] [--radius RADIUS] [--n NSOURCES] [--out OUTFILE]

optional arguments:
  -h, --help         show this help message and exit

  --ref_ra REF_RA    Central/reference RA position HH:MM:SS.S format
  --ref_dec REF_DEC  Central/reference Dec position DD:MM:SS.S format
  --radius RADIUS    radius within which the new positions are generated (deg)
  --n NSOURCES       Number of positions to generate
  --out OUTFILE      Filename for saving output (csv format)</code></pre>
<h2 id="documentation">Documentation</h2>
<p>Documentation is currently just this file, and associated python
docstrings.</p>
<h2 id="author-contribution">Author / Contribution</h2>
<p>This project is developed by Dev One. If you want to contribute to
this project please create a fork and issue pull requests for new
features or bug fixes.</p>
<h2 id="credit">Credit</h2>
<p>If you find this project to be useful in your academic work please
cite the following paper: <a href="https://nature.com" class="external-link">One, D. et
al. Nature, 2021</a></p>
</blockquote>
<p>The above <code>README.md</code> file will render on <a href="https://github.com/ADACS-Australia/MAP21B-Training-BPindor/tree/cycle2" class="external-link">github</a>
as below.</p>
<figure><img src="../fig/reuse/readme.png" alt="Rendered README.md on GitHub" class="figure mx-auto d-block"><div class="figcaption">Rendered README.md on GitHub</div>
</figure>
</div>
</section><section><h2 class="section-heading" id="summary-1">Summary<a class="anchor" aria-label="anchor" href="#summary-1"></a>
</h2>
<hr class="half-width">
<p>In this section we have made no changes to the core functionality of
our software project. Instead we have made changes that make the
software:</p>
<ul>
<li><strong>easier to use for both developers and users</strong></li>
<li>by separating the command line interface from the core
functionality;</li>
<li>
<strong>more portable</strong>
<ul>
<li>by listing dependencies in <code>requirements.txt</code> and
<code>environment.yml</code>;</li>
</ul>
</li>
<li>
<strong>easier to acknowledge and get help</strong>,
<ul>
<li>by adding version, date, authorship, and citation information;
and</li>
</ul>
</li>
<li>
<strong>more accessible</strong>,
<ul>
<li>by providing a <code>README.md</code> file.</li>
</ul>
</li>
</ul>
<p>The state of our project at the end of the second development cycle
can be seen on the cycle2 branch of our github repository: <a href="https://github.com/ADACS-Australia/MAP21B-Training-BPindor/tree/cycle2" class="external-link">here</a>.</p>
<div id="solo-activity-a-github-landing-page" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="solo-activity-a-github-landing-page" class="callout-inner">
<h3 class="callout-title">SOLO Activity: A GitHub landing page</h3>
<div class="callout-content">
<p>When people visit the GitHub page for your project they would like to
see more than just a directory listing of the files. People are
typically looking for some description of what the project is, and how
they can install and use it. In this activity we will ensure that our
project has a landing page that is attractive to potential users.</p>
<ol style="list-style-type: decimal">
<li>Use the GitHub online editor to create a new <code>LICENSE</code>
file and choose an appropriate license from the template.</li>
<li>Create or update your project’s <code>README.md</code> file so that
it contains at least:
<ol style="list-style-type: decimal">
<li>A short description of the software</li>
<li>Some basic install instructions,</li>
<li>Some basic usage instructions,</li>
<li>A note about what documentation is available,</li>
<li>A section that lists the authors/contributors to the project (and a
link to CONTRIBUTING.md if you have one).</li>
<li>A section that lets people know how you would like to receive credit
if they should use your work.</li>
</ol>
</li>
<li>Edit the “about” section of the GitHub page to include a short
description of the project and at least one topic.</li>
</ol>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-4">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/PaulHancock/Lesson-Testing/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/PaulHancock/Lesson-Testing/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/PaulHancock/Lesson-Testing/" class="external-link">Source</a></p>
        <p>
        <a href="../citation.html">Cite</a>
        | <a href="mailto:paul.hancock@curtin.edu.au">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-4" align="center">
  			<a title="GDPR-compliant Web Analytics" href="https://clicky.com/101447658" class="external-link"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0"></a>
      		<script async data-id="101447658" src="//static.getclicky.com/js"></script>
</div>
		<div class="col-md-4">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/" class="external-link">sandpaper (0.18.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/PaulHancock/varnish/tree/aa02ce03b7798d576663f00c28600bc841f57f59" class="external-link">varnish (1.0.9)</a></p>
		</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://PaulHancock.github.io/Lesson-Testing/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, machine learning, AI, astronomy",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://PaulHancock.github.io/Lesson-Testing/instructor/aio.html",
  "identifier": "https://PaulHancock.github.io/Lesson-Testing/instructor/aio.html",
  "dateCreated": "2026-02-23",
  "dateModified": "2026-02-25",
  "datePublished": "2026-02-25"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

